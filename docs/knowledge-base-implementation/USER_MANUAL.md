# ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹çµ±åˆã‚·ã‚¹ãƒ†ãƒ  å–æ‰±èª¬æ˜æ›¸

## ğŸ“– ã¯ã˜ã‚ã«

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€TypeIDÃ—TargetIDÃ—ThemeIDã®çµ„ã¿åˆã‚ã›ã‹ã‚‰æœ€é©åŒ–ã•ã‚ŒãŸInstagramæŠ•ç¨¿ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚å¾“æ¥ã®AIç”Ÿæˆã¨ç•°ãªã‚Šã€**100%å³å¯†ãƒãƒƒãƒãƒ³ã‚°**ã«ã‚ˆã‚Šã€å¦¥å”ã®ãªã„é«˜å“è³ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æä¾›ã—ã¾ã™ã€‚

---

## ğŸš€ åŸºæœ¬çš„ãªä½¿ã„æ–¹

### Step 1: ã‚·ã‚¹ãƒ†ãƒ æœ‰åŠ¹åŒ–

```typescript
const result = await pageStructureAnalyzer.analyzePageStructureAndTemplates(
  input,
  {
    useKnowledgeBase: true,
    useStructuredGeneration: true,  // æ–°ã‚·ã‚¹ãƒ†ãƒ æœ‰åŠ¹åŒ–
    typeId: "001",                  // å¿…é ˆ
    targetId: "P001",               // å¿…é ˆ  
    themeId: "T006"                 // å¿…é ˆ
  }
);
```

### Step 2: çµæœã®ç¢ºèª

```typescript
console.log('ç”Ÿæˆã•ã‚ŒãŸãƒšãƒ¼ã‚¸æ•°:', result.length);
console.log('1ãƒšãƒ¼ã‚¸ç›®:', result[0]);
```

---

## ğŸ¯ TypeIDÃ—TargetIDÃ—ThemeID é¸æŠã‚¬ã‚¤ãƒ‰

### TypeIDï¼ˆæŠ•ç¨¿ã‚¿ã‚¤ãƒ—ï¼‰é¸æŠ

| TypeID | åç§° | ç‰¹å¾´ | é©ç”¨å ´é¢ |
|--------|------|------|----------|
| **001** | å…±æ„Ÿå‹ | æ„Ÿæƒ…ã«è¨´æ±‚ã€å¿ƒç†çš„å…±æ„Ÿé‡è¦– | ä¸å®‰è§£æ¶ˆã€å¿ƒç†ã‚µãƒãƒ¼ãƒˆ |
| **002** | æ•™è‚²å‹ | ä½“ç³»çš„å­¦ç¿’ã€ã‚¹ã‚­ãƒ«ç¿’å¾—é‡è¦– | çŸ¥è­˜æä¾›ã€èƒ½åŠ›é–‹ç™º |
| **003** | æƒ…å ±å‹ | ãƒ‡ãƒ¼ã‚¿ãƒ»å®Ÿç¸¾é‡è¦–ã€å®¢è¦³æ€§ | æˆ¦ç•¥ç«‹æ¡ˆã€æ„æ€æ±ºå®šæ”¯æ´ |
| **004** | åŠ¹ç‡å‹ | æ™‚çŸ­ãƒ»åŠ¹ç‡é‡è¦–ã€å®Ÿç”¨æ€§ | å³åŠ¹æ€§ã€å®Ÿè·µçš„è§£æ±º |

### TargetIDï¼ˆãƒšãƒ«ã‚½ãƒŠï¼‰é¸æŠ

| TargetID | åç§° | ç‰¹å¾´ | å¿ƒç†çš„ãƒ‹ãƒ¼ã‚º |
|----------|------|------|-------------|
| **P001** | æˆ¦ç•¥çš„å°±æ´»ç”Ÿ | åŠ¹ç‡é‡è¦–ã€ãƒ‡ãƒ¼ã‚¿å¿—å‘ã€è¨ˆç”»çš„ | ç¢ºå®Ÿæ€§ã€å„ªä½æ€§ã€åŠ¹ç‡æ€§ |
| **P002** | ä¸å®‰è§£æ¶ˆå‹å°±æ´»ç”Ÿ | å…±æ„Ÿé‡è¦–ã€å¿ƒç†ã‚µãƒãƒ¼ãƒˆãƒ‹ãƒ¼ã‚º | å®‰å¿ƒæ„Ÿã€å…±æ„Ÿã€å¿ƒç†çš„å®‰å®š |
| **P003** | å®Ÿè·µå¿—å‘å°±æ´»ç”Ÿ | å®Ÿè·µé‡è¦–ã€å…·ä½“çš„æ‰‹æ³•ãƒ‹ãƒ¼ã‚º | å®Ÿç”¨æ€§ã€å³åŠ¹æ€§ã€ç¢ºå®Ÿãªæˆæœ |
| **P004** | æ™‚æœŸç‰¹åŒ–å°±æ´»ç”Ÿ | æ™‚æœŸæ„è­˜ã€ç·Šæ€¥æ€§å¯¾å¿œ | ã‚¿ã‚¤ãƒŸãƒ³ã‚°é©åˆã€æœŸé™é”æˆ |
| **P005** | ã‚­ãƒ£ãƒªã‚¢å¿—å‘ç¤¾ä¼šäºº | å°†æ¥å¿—å‘ã€å®‰å®šæ€§é‡è¦– | ã‚­ãƒ£ãƒªã‚¢å®‰å®šã€å°‚é–€æ€§å‘ä¸Š |
| **P006** | å­¦æ­´ã‚³ãƒ³ãƒ—ãƒ¬ãƒƒã‚¯ã‚¹å±¤ | ã‚³ãƒ³ãƒ—ãƒ¬ãƒƒã‚¯ã‚¹è§£æ¶ˆãƒ‹ãƒ¼ã‚º | è‡ªä¿¡å›å¾©ã€å·®åˆ¥åŒ– |
| **P007** | åœ°æ–¹å°±æ´»ç”Ÿ | åœ°æ–¹ç‰¹æœ‰ã®èª²é¡Œæ„è­˜ | åœ°åŸŸé©å¿œã€æƒ…å ±æ ¼å·®è§£æ¶ˆ |
| **P008** | å°‚é–€æ¥­ç•Œå¿—æœ› | æ¥­ç•Œç‰¹åŒ–ãƒ‹ãƒ¼ã‚º | å°‚é–€æ€§ã€æ¥­ç•Œé©å¿œ |

### ThemeIDï¼ˆãƒ†ãƒ¼ãƒï¼‰é¸æŠ

| ThemeID | åç§° | ã‚«ãƒ†ã‚´ãƒª | é©ç”¨å†…å®¹ |
|---------|------|----------|----------|
| **T001** | æ„Ÿæƒ…æ”¯æ´ | å¿ƒç†ã‚µãƒãƒ¼ãƒˆ | ä¸å®‰è§£æ¶ˆã€å¿ƒç†ã‚±ã‚¢ |
| **T002** | ä½“ç³»æ•™è‚² | å­¦ç¿’æ”¯æ´ | ã‚¹ã‚­ãƒ«ç¿’å¾—ã€çŸ¥è­˜ä½“ç³» |
| **T003** | å®Ÿç¸¾è¨¼æ˜ | æ¨©å¨æ€§ | ãƒ‡ãƒ¼ã‚¿æç¤ºã€å®Ÿç¸¾ã‚¢ãƒ”ãƒ¼ãƒ« |
| **T004** | æƒ…å ±æä¾› | å®¢è¦³æƒ…å ± | é¸æŠè‚¢æç¤ºã€æ¯”è¼ƒãƒ‡ãƒ¼ã‚¿ |
| **T005** | æˆ¦ç•¥è¨­è¨ˆ | è¨ˆç”»ç«‹æ¡ˆ | æˆ¦ç•¥æ§‹ç¯‰ã€ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— |
| **T006** | å•é¡Œè§£æ±º | èª²é¡Œå¯¾å¿œ | å…·ä½“çš„è§£æ±ºç­–ã€å®Ÿè·µæ‰‹é † |
| **T007** | è¡Œå‹•ä¿ƒé€² | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | å®Ÿè¡Œæ”¯æ´ã€è¡Œå‹•å¤‰å®¹ |

---

## ğŸ’¡ å®Ÿè·µçš„ãªçµ„ã¿åˆã‚ã›ä¾‹

### ğŸ¯ åŠ¹æœçš„ãªçµ„ã¿åˆã‚ã›

#### 1. æˆ¦ç•¥çš„ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘æ„Ÿæƒ…å…±æ„Ÿã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
```typescript
{
  typeId: "001",    // å…±æ„Ÿå‹
  targetId: "P001", // æˆ¦ç•¥çš„å°±æ´»ç”Ÿ
  themeId: "T006"   // å•é¡Œè§£æ±º
}
```
**åŠ¹æœ**: è«–ç†çš„æ€è€ƒãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ„Ÿæƒ…çš„å´é¢ã‹ã‚‰å•é¡Œè§£æ±ºã‚’æç¤º

#### 2. ä¸å®‰è§£æ¶ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘åŠ¹ç‡çš„ã‚µãƒãƒ¼ãƒˆ
```typescript
{
  typeId: "004",    // åŠ¹ç‡å‹
  targetId: "P002", // ä¸å®‰è§£æ¶ˆå‹å°±æ´»ç”Ÿ  
  themeId: "T007"   // è¡Œå‹•ä¿ƒé€²
}
```
**åŠ¹æœ**: ä¸å®‰ã‚’æŠ±ãˆã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å³åŠ¹æ€§ã®ã‚ã‚‹è¡Œå‹•ä¿ƒé€²

#### 3. å®Ÿè·µå¿—å‘ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘æ•™è‚²çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
```typescript
{
  typeId: "002",    // æ•™è‚²å‹
  targetId: "P003", // å®Ÿè·µå¿—å‘å°±æ´»ç”Ÿ
  themeId: "T002"   // ä½“ç³»æ•™è‚²
}
```
**åŠ¹æœ**: å®Ÿè·µãƒ‹ãƒ¼ã‚ºã«ä½“ç³»çš„å­¦ç¿’ã‚’çµ„ã¿åˆã‚ã›

---

## ğŸ” ç”Ÿæˆçµæœã®ç†è§£

### ãƒšãƒ¼ã‚¸æ§‹æˆãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹

#### empathy-strategic-solution-5page
```
ãƒšãƒ¼ã‚¸1: æ„Ÿæƒ…çš„å…±æ„Ÿï¼ˆå•é¡Œèªè­˜ï¼‰
ãƒšãƒ¼ã‚¸2: å•é¡Œåˆ†æï¼ˆæˆ¦ç•¥çš„æ€è€ƒï¼‰
ãƒšãƒ¼ã‚¸3: è§£æ±ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
ãƒšãƒ¼ã‚¸4: å®Ÿè·µçš„ã‚¹ãƒ†ãƒƒãƒ—
ãƒšãƒ¼ã‚¸5: è¡Œå‹•ä¿ƒé€²ã¾ã¨ã‚
```

#### efficiency-anxiety-action-3page
```
ãƒšãƒ¼ã‚¸1: ä¸å®‰å…±æ„Ÿï¼ˆå³åº§ã®ç†è§£ï¼‰
ãƒšãƒ¼ã‚¸2: åŠ¹ç‡çš„è§£æ±ºç­–
ãƒšãƒ¼ã‚¸3: ä»Šã™ãå®Ÿè¡Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³
```

### å‡ºåŠ›å½¢å¼
```typescript
interface PageStructure {
  æ¦‚è¦: string;         // ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹æœ€é©åŒ–èª¬æ˜
  æœ‰ç›Šæ€§: string;       // å³å¯†ãƒãƒƒãƒãƒ³ã‚°ã«ã‚ˆã‚‹ä¾¡å€¤
  template: string;     // ä½¿ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  title: string;        // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«
  theme: string;        // å…·ä½“çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
}
```

---

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

### âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆ

#### 1. çµ„ã¿åˆã‚ã›ãŒå­˜åœ¨ã—ãªã„
```
Error: No page structure pattern found for combination: 001-P001-T999
```
**å¯¾å‡¦æ³•**: æœ‰åŠ¹ãªçµ„ã¿åˆã‚ã›ã‚’ç¢ºèªã—ã€å­˜åœ¨ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨

#### 2. å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸è¶³
```typescript
// âŒ ä¸æ­£
{
  useStructuredGeneration: true,
  typeId: "001"
  // targetId, themeId ãŒä¸è¶³
}

// âœ… æ­£å¸¸
{
  useStructuredGeneration: true,
  typeId: "001",
  targetId: "P001", 
  themeId: "T006"
}
```

### ğŸ”§ ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

#### åˆ©ç”¨å¯èƒ½ãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºèª
```typescript
import { PageStructureMatcher } from './app/services/knowledgeBase/PageStructureMatcher';

// å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºèª
const allPatterns = PageStructureMatcher.getAvailablePatterns();
console.log('åˆ©ç”¨å¯èƒ½ãƒ‘ã‚¿ãƒ¼ãƒ³æ•°:', allPatterns.length);

// TypeIDåˆ¥ãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºèª
const type001Patterns = PageStructureMatcher.getPatternsForType("001");
console.log('001ã‚¿ã‚¤ãƒ—ã®ãƒ‘ã‚¿ãƒ¼ãƒ³:', type001Patterns.map(p => p.matchingKey));
```

---

## ğŸ¨ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### æ–°ã—ã„çµ„ã¿åˆã‚ã›ã®è¿½åŠ 

#### 1. ãƒãƒƒãƒãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³è¿½åŠ 
`app/services/knowledgeBase/data/pageStructureMatching.json`ã«è¿½åŠ :

```json
{
  "matchingKey": "001-P009-T022",
  "description": "å…±æ„Ÿå‹Ã—æ–°ãƒšãƒ«ã‚½ãƒŠÃ—æ–°ãƒ†ãƒ¼ãƒ",
  "pageStructureId": "custom-pattern-4page",
  "reasoning": "æ–°ã—ã„çµ„ã¿åˆã‚ã›ã®åŠ¹æœçš„ç†ç”±"
}
```

#### 2. ãƒšãƒ¼ã‚¸æ§‹æˆå®šç¾©è¿½åŠ 
`app/services/knowledgeBase/data/pageStructures/custom-pattern-4page.json`ã‚’ä½œæˆ

---

## ğŸ“Š åŠ¹æœæ¸¬å®š

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™
- **ãƒãƒƒãƒãƒ³ã‚°æ™‚é–“**: é€šå¸¸ < 10ms
- **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆæ™‚é–“**: é€šå¸¸ < 15ç§’
- **æŠ½å‡ºé …ç›®æ•°**: ãƒšãƒ¼ã‚¸æ§‹æˆã«ã‚ˆã‚Šå¯å¤‰

### å“è³ªæŒ‡æ¨™
- **ãƒãƒƒãƒãƒ³ã‚°æˆåŠŸç‡**: 100%ï¼ˆå­˜åœ¨ã™ã‚‹çµ„ã¿åˆã‚ã›ï¼‰
- **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å“è³ª**: å³å¯†ãƒãƒƒãƒãƒ³ã‚°ã«ã‚ˆã‚‹æœ€é©åŒ–
- **ä¸€è²«æ€§**: ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©ã«ã‚ˆã‚‹çµ±ä¸€æ€§

---

## ğŸ†˜ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

#### Q1: "çµ±åˆã‚·ã‚¹ãƒ†ãƒ å‡¦ç†å¤±æ•—" ã‚¨ãƒ©ãƒ¼
**åŸå› **: ãƒšãƒ¼ã‚¸æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸è¶³ã¾ãŸã¯Gemini APIã‚¨ãƒ©ãƒ¼
**è§£æ±º**: ãƒ­ã‚°ã‚’ç¢ºèªã—ã€è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ã¨APIæ¥ç¶šã‚’ç¢ºèª

#### Q2: ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒæœŸå¾…ã¨ç•°ãªã‚‹
**åŸå› **: å…¥åŠ›ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒæŠ½å‡ºãƒ«ãƒ¼ãƒ«ã«é©åˆã—ã¦ã„ãªã„
**è§£æ±º**: ã‚ˆã‚Šå…·ä½“çš„ã§æ§‹é€ åŒ–ã•ã‚ŒãŸå…¥åŠ›ã‚’æä¾›

#### Q3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé…ã„
**åŸå› **: ãƒšãƒ¼ã‚¸æ•°ãŒå¤šã„ã¾ãŸã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é‡ãŒå¤§é‡
**å¯¾ç­–**: å…¥åŠ›ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’é©åˆ‡ãªã‚µã‚¤ã‚ºã«èª¿æ•´

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

### ãƒ­ã‚°ã®ç¢ºèª
ã‚·ã‚¹ãƒ†ãƒ å®Ÿè¡Œæ™‚ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’ç¢ºèª:
```
ğŸ¯ æ–°çµ±åˆã‚·ã‚¹ãƒ†ãƒ é–‹å§‹: {typeId, targetId, themeId}
âœ… ãƒšãƒ¼ã‚¸æ§‹é€ ãƒãƒƒãƒãƒ³ã‚°æˆåŠŸ: [description]  
âœ… ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé …ç›®ãƒãƒƒãƒ”ãƒ³ã‚°å®Œäº†: [statistics]
ğŸ‰ æ–°çµ±åˆã‚·ã‚¹ãƒ†ãƒ å®Œäº†: [summary]
```

### ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ã®ç¢ºèª
```typescript
// åˆ©ç”¨å¯èƒ½ãªãƒ‘ã‚¿ãƒ¼ãƒ³æ•°ç¢ºèª
console.log('ç·ãƒ‘ã‚¿ãƒ¼ãƒ³æ•°:', PageStructureMatcher.getAvailablePatterns().length);

// ç‰¹å®šã®çµ„ã¿åˆã‚ã›ç¢ºèª
try {
  const pattern = PageStructureMatcher.findExactMatch("001", "P001", "T006");
  console.log('ãƒãƒƒãƒãƒ³ã‚°æˆåŠŸ:', pattern.description);
} catch (error) {
  console.error('ãƒãƒƒãƒãƒ³ã‚°å¤±æ•—:', error.message);
}
```