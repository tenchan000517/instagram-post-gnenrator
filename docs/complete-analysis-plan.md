# 104個ナレッジ完全走査分析計画書

**作成日時**: 2025-01-24  
**目的**: ページ構成×テンプレート組み合わせアプローチの検証  
**重要原則**: 先入観排除・期待収束回避・客観的事実のみに基づく分析  

---

## 1. 分析の前提と制約

### 1.1 検証対象仮説
**「ページ構成パターン × テンプレートパターンの組み合わせで104個のナレッジを表現可能」**

### 1.2 重要な注意事項
- **4×8=32通り**: これは仮説であり、実際の数値は分析結果による
- **先入観排除**: 期待される結果に無理に収束させない
- **独立分析**: 各ナレッジを他の結果に影響されず独立して分析
- **客観性**: 推測・類推を排除し、記録された事実のみを使用

### 1.3 分析範囲の明確化
- **デザイン要素**: アイコン・カラー・視覚装飾は考慮対象外
- **重要要素**: レイアウト（情報の順序・配置）と項目の網羅性
- **核心**: ナレッジの問題解決フローの表現方法

---

## 2. 分析方法論

### 2.1 Phase 1: 個別ナレッジ詳細構造分析
```
目的: 各ナレッジの問題解決フローを客観的に抽出
方法: Phase 1分析記録から事実のみを抽出
禁止: 仮説に基づく分類・推測・類推
```

#### 分析項目
```typescript
interface KnowledgeStructureAnalysis {
  knowledgeId: string;              // K001-K116
  problemType: string;              // 記録された問題の種類
  solutionFlow: string[];           // 解決フローの段階
  pageRoles: string[];              // 各ページの機能・役割
  informationOrder: string[];       // 情報提示の順序
  requiredElements: string[];       // 必須表現要素
  layoutConstraints: string[];      // レイアウト制約
}
```

### 2.2 Phase 2: ページ構成パターン抽出
```
目的: 問題解決フローに基づくページ構成パターンの客観的分類
方法: Phase 1の解決フローから構成パターンを帰納的に抽出
禁止: 予想される数（4個等）への強制分類
```

#### 抽出基準
1. **解決フローの段階数**: 実際の記録に基づく段階
2. **ページ役割の種類**: 導入・分析・解決・行動等の実際の役割
3. **情報提示の順序**: 時系列・論理構造・感情フロー等
4. **完結性**: 問題から解決まで完結するか

### 2.3 Phase 3: テンプレートパターン抽出
```
目的: 情報の配置・表現方法に基づくテンプレートパターンの客観的分類
方法: レイアウト・項目網羅性から表現パターンを帰納的に抽出
禁止: 予想される数（8個等）への強制分類
```

#### 抽出基準
1. **情報配置方法**: リスト・カード・対比・階層等
2. **項目提示形式**: 番号付き・チェック・段階・一覧等
3. **構造複雑度**: 単純・中程度・複雑な情報構造
4. **必須要素**: そのナレッジで絶対に必要な表現要素

### 2.4 Phase 4: 組み合わせマトリックス作成
```
目的: 抽出されたパターン同士の組み合わせ可能性を検証
方法: 各ナレッジがどのページ構成×テンプレートで表現可能かを検証
禁止: 理論値での判断・推測による適合性判定
```

#### 検証基準
1. **完全表現可能性**: そのナレッジの本質的解決フローを損なわずに表現可能
2. **必須要素充足**: そのナレッジで必要な全ての表現要素を含む
3. **品質維持**: 元の分析で記録された品質水準を維持可能
4. **制約適合**: そのナレッジ固有の制約に適合

### 2.5 Phase 5: カバレッジ完全検証
```
目的: 104個全ナレッジのカバー可能性を1つずつ検証
方法: 各ナレッジについて組み合わせでの表現可能性を個別判定
禁止: 統計的推測・代表例での判断
```

---

## 3. 分析結果出力形式

### 3.1 Phase 1出力: 個別ナレッジ分析結果
```markdown
## K001個別分析結果
### 問題解決フロー
1. [記録された実際のフロー]
2. [段階ごとの具体的内容]

### ページ構成要求
- ページ数: [実際の数]
- 各ページ役割: [記録された役割]
- 情報提示順序: [実際の順序]

### テンプレート要求
- レイアウト制約: [記録された制約]
- 必須表現要素: [記録された要素]
- 情報配置方法: [記録された方法]
```

### 3.2 Phase 2出力: ページ構成パターン
```markdown
## 抽出されたページ構成パターン
### パターン1: [データから抽出された名称]
- 適用ナレッジ数: [実数]
- 解決フロー特徴: [共通の特徴]
- ページ役割構成: [実際の構成]

### [その他のパターン...]
```

### 3.3 Phase 3出力: テンプレートパターン
```markdown
## 抽出されたテンプレートパターン
### パターンA: [データから抽出された名称]
- 適用ナレッジ数: [実数]
- 情報配置特徴: [共通の特徴]
- 必須表現要素: [共通の要素]

### [その他のパターン...]
```

### 3.4 Phase 4出力: 組み合わせマトリックス
```markdown
## ページ構成×テンプレート 組み合わせマトリックス
|       | テンプレートA | テンプレートB | ... |
|-------|--------------|--------------|-----|
| 構成1  | [適用可能ナレッジ数] | [適用可能ナレッジ数] | ... |
| 構成2  | [適用可能ナレッジ数] | [適用可能ナレッジ数] | ... |
| ...   | ... | ... | ... |
```

### 3.5 Phase 5出力: 完全カバレッジ検証結果
```markdown
## 104個ナレッジ完全カバレッジ検証結果

### 組み合わせで完全表現可能: [実数]個
[具体的なナレッジID一覧]

### 組み合わせで部分表現可能: [実数]個
[具体的なナレッジIDと制約]

### 組み合わせで表現不可: [実数]個
[具体的なナレッジIDと理由]

### 例外ケース詳細分析
[表現不可のナレッジの詳細分析]
```

---

## 4. 品質保証基準

### 4.1 客観性確保
- **全件確認**: 104個全てを個別に確認
- **記録ベース**: Phase 1分析記録の記載事実のみを使用
- **推測排除**: 「おそらく」「と思われる」等の推測を排除

### 4.2 完全性確保
- **漏れ防止**: K001-K116の欠番も含めた完全リスト確認
- **重複排除**: 同一ナレッジの重複分析を防止
- **網羅性**: 全ての側面（構成・テンプレート・組み合わせ）を網羅

### 4.3 正確性確保
- **事実検証**: 各分析結果をPhase 1記録と照合
- **論理整合性**: 分析段階間の論理的整合性を確認
- **例外記録**: 説明できない例外ケースの明確な記録

---

## 5. データソースと保存先の明確化

### 5.1 元データソース

#### 5.1.1 Phase 1分析記録（完全ファイルリスト）
```
/docs/phase1-analysis/session1-K001-K010-analysis.md    # K001-K010 (10個)
/docs/phase1-analysis/session1-K011-K018-analysis.md    # K011-K018 (8個) 
/docs/phase1-analysis/session1-K021-K030-analysis.md    # K021-K030 (10個)
/docs/phase1-analysis/session2-K031-K045-analysis.md    # K031-K045 (15個)
/docs/phase1-analysis/session2-K046-K059-analysis.md    # K046-K059 (14個)
/docs/phase1-analysis/session3-K061-K080-analysis.md    # K061-K080 (20個)
/docs/phase1-analysis/session3-K091-K100-analysis.md    # K091-K100 (10個)
/docs/phase1-analysis/session3-K101-K110-analysis.md    # K101-K110 (10個)
/docs/phase1-analysis/session3-K111-K116-analysis.md    # K111-K116 (6個)
```
**合計**: 103個のナレッジ（欠番: K004, K008, K009, K013, K014, K015, K019, K020, K066-K070, K075, K094, K095, K110）

#### 5.1.2 生観察データ（完全ファイルリスト）
```
/docs/raw-analysis/contents-001-observation.json ～ contents-116-observation.json
```
**注意**: contents-XXX-observation.jsonとKXXX.jsonは対応関係あり（contents-001 → K001等）

#### 5.1.3 ナレッジベース（完全ファイルリスト）
```
/app/data/knowledgeBase/knowledge/K001.json ～ K116.json
```
**存在確認必要**: 欠番のKXXX.jsonファイルは存在しない場合がある

#### 5.1.4 分析対象の正確な範囲
```
実際の分析対象: 103個のナレッジ
- K001-K003, K005-K007, K010-K012, K016-K018
- K021-K059 (K004, K008, K009, K013-K015, K019-K020除く)
- K061-K065, K071-K074, K076-K116 (K066-K070, K075, K094-K095, K110除く)
```

**重要**: タイトルは「104個ナレッジ」だが、実際は103個が分析対象

### 5.2 分析結果保存先（ディレクトリ構造）
```
/docs/phase2-analysis/
├── individual/          # 個別分析結果 (103ファイル)
│   ├── K001-analysis.json
│   ├── K002-analysis.json
│   └── ... (K001-K116の存在するもの全て)
├── patterns/           # パターン分析結果
│   ├── page-structures.json      # ページ構成パターン
│   └── template-patterns.json    # テンプレートパターン
├── matrix/             # 組み合わせ検証
│   └── combination-matrix.json   # パターン組み合わせマトリックス
└── final-coverage-report.md      # 最終検証結果
```

### 5.3 出力フォーマット仕様
```typescript
// 個別分析結果フォーマット
interface IndividualAnalysis {
  knowledgeId: string;                    // K001-K116
  sourceData: {
    phase1Record: string;                 // Phase1分析の参照
    rawObservation: string;               // 生観察データの参照
    knowledgeBase: string;                // ナレッジベースの参照
  };
  problemSolutionFlow: {
    problem: string;                      // 解決する問題
    flowStages: string[];                 // 解決フローの段階
    completionState: string;              // 解決完了状態
  };
  pageStructureRequirements: {
    totalPages: number;                   // 総ページ数
    pageRoles: Array<{                    // 各ページの役割
      pageNumber: number;
      role: string;
      description: string;
    }>;
    flowOrder: string[];                  // 情報提示の順序
  };
  templateRequirements: {
    layoutConstraints: string[];          // レイアウト制約
    requiredElements: string[];           // 必須表現要素
    informationArrangement: string;       // 情報配置方法
  };
}

// ページ構成パターンフォーマット
interface PageStructurePattern {
  patternId: string;                      // 自動生成されるパターンID
  patternName: string;                    // データから抽出された名称
  characteristics: {
    typicalPageCount: number[];           // 典型的なページ数
    flowType: string;                     // フローのタイプ（段階的、循環的等）
    roleSequence: string[];               // ページ役割の典型的な順序
  };
  applicableKnowledges: string[];         // このパターンが適用可能なナレッジID
  constraints: string[];                  // このパターンの制約条件
}

// テンプレートパターンフォーマット
interface TemplatePattern {
  patternId: string;                      // 自動生成されるパターンID
  patternName: string;                    // データから抽出された名称
  characteristics: {
    layoutType: string;                   // レイアウトタイプ
    informationDensity: string;           // 情報密度（低・中・高）
    visualStructure: string;              // 視覚的構造
  };
  requiredElements: string[];             // 必須の表現要素
  applicableKnowledges: string[];         // このパターンが適用可能なナレッジID
}
```

---

## 6. 実行手順

### Step 1: 全データソースの存在確認と読み込み
```
# Phase 1分析記録の確認（9ファイル）
- /docs/phase1-analysis/ の全ファイル存在確認
- 各ファイルの読み込み可能性確認（ファイルサイズチェック）

# 生観察データの確認（103ファイル）
- /docs/raw-analysis/ の対象ファイル存在確認
- 欠番ファイルの確認（contents-004, contents-008等）

# ナレッジベースの確認（103ファイル）
- /app/data/knowledgeBase/knowledge/ の対象ファイル存在確認
- 欠番ファイルの確認（K004.json, K008.json等）
```

### Step 2: 103個個別分析実行
```
各ナレッジについて（K001-K116の存在するもの）：
1. 3つのデータソースからの情報統合
   - Phase1分析記録の該当セクション読み込み
   - 生観察データ(contents-XXX-observation.json)読み込み  
   - ナレッジベース(KXXX.json)読み込み
2. 問題解決フローの客観的抽出
3. ページ構成要求の客観的抽出
4. テンプレート要求の客観的抽出
5. IndividualAnalysis形式でのJSON出力
```

### Step 3: パターン帰納的抽出
```
1. ページ構成パターンの客観的分類
2. テンプレートパターンの客観的分類
3. パターン数・特徴の確定
```

### Step 4: 組み合わせ検証実行
```
1. 全組み合わせでのマトリックス作成
2. 各ナレッジでの適用可能性検証
3. カバレッジ率の正確な計算
```

### Step 5: 結果統合・報告書作成
```
1. 全分析結果の統合（103個）
2. 例外ケース・パターン適合不可の詳細分析
3. 最終検証結果の報告書作成（final-coverage-report.md）
4. カバレッジ率の正確な計算と報告
```

---

## 6. 期待される成果物

### 6.1 主要成果物
1. **103個個別分析結果**: 全存在ナレッジの詳細構造分析
2. **ページ構成パターン一覧**: データから帰納的に抽出された実際のパターン
3. **テンプレートパターン一覧**: データから帰納的に抽出された実際のパターン
4. **組み合わせマトリックス**: 全パターンの組み合わせ検証結果
5. **完全カバレッジ検証結果**: 103個の表現可能性の完全検証

### 6.2 意思決定材料
- **実現可能性**: 組み合わせアプローチの実現可能性
- **品質影響**: 組み合わせによる品質への影響
- **開発効率**: 期待される開発効率向上
- **例外対応**: 組み合わせで対応できない例外ケースへの対応策

---

## 7. 重要な注意事項

### 7.1 分析時の禁止事項
- **期待収束**: 仮説に都合の良い結果への誘導
- **推測補完**: データ不足部分の推測による補完
- **代表例判断**: 一部の代表例による全体判断
- **数値強制**: 予想される数値への強制的分類

### 7.2 品質基準
- **100%走査**: 103個全存在ナレッジの漏れなき分析
- **3ソース統合**: Phase1記録・生観察データ・ナレッジベースの完全統合
- **事実のみ**: 記録された事実のみを使用、推測・類推を排除
- **独立性**: 各ナレッジの独立した分析
- **検証可能性**: 全ての分析結果の検証可能性確保

### 7.3 成功基準
- **完全性**: 103個全存在ナレッジの分析完了
- **客観性**: 先入観に影響されない客観的分析
- **実用性**: 実際の開発に使用可能な具体的結果
- **信頼性**: 3つのデータソースとの完全な整合性

---

## 8. 分析の大原則

### 8.1 パターン数への先入観排除
- **仮説の4×8=32通り**は完全に忘れる
- パターン数はデータから自然に導出される
- 最終的なパターン数が10個でも100個でも、それが事実なら受け入れる

### 8.2 「100点じゃないものはテンプレートが存在しない」原則
- 各ナレッジに対して最適なページ構成×テンプレートが存在すると仮定
- 妥協による適合ではなく、完璧な適合を探す
- 適合しない場合は新しいパターンの発見と認識する

### 8.3 分析の独立性
- 各ナレッジは完全に独立して分析
- 他のナレッジの分析結果に影響されない
- パターン化は全ナレッジ分析後の帰納的プロセス

---

## 実行承認

この分析計画書に基づいて、**103個ナレッジ完全走査分析**を実行します。  
全ての分析は客観的事実に基づき、先入観を排除して実行されます。

**重要確認事項**：
- **分析対象**: 103個のナレッジ（K001-K116のうち存在するもの）
- **元データソース**: 
  - Phase1分析記録: /docs/phase1-analysis/ (9ファイル)
  - 生観察データ: /docs/raw-analysis/ (103ファイル)  
  - ナレッジベース: /app/data/knowledgeBase/knowledge/ (103ファイル)
- **出力先**: /docs/phase2-analysis/ 配下の指定ディレクトリ構造
- **フォーマット**: TypeScript型定義に準拠したJSON形式
- **品質基準**: 100%カバレッジ、3ソース統合、客観的事実のみ、検証可能性確保