# 二軸同時分析ガイドライン

## 📅 作成日時
2025年7月23日

## 🎯 分析目的

投稿コンテンツを**先入観なし**で正確に分析し、後のパターン抽出とシステム化を効率的に行うため、以下の二軸で同時分析を実施する：

1. **軸1: フォーマット準拠分析** - システムが直接使用する構造化データ
2. **軸2: 事実ベース観察記録** - 先入観なしの純粋な観察データ

---

## 🔧 軸1: フォーマット準拠分析（システム用）

### 基本フォーマット

```json
{
  "source": "contents-xxx",
  "problemCategory": "問題のカテゴリ",
  "problemDescription": "ペルソナの「悩み・困った」「ニーズ（情報）」「目的」「有益情報」のいずれか",
  "postType": "001-004のいずれか（課題タイプにより自動判定）",
  "postTypeReason": "投稿タイプ判定の理由",
  "solutionContent": {
    "概要": "どのように解決したか",
    "具体的手順": [],
    "提供情報": [],
    "実用的なアドバイス": []
  },
  "effectiveExpressions": [
    "各ページのレイアウト・表現方法（視覚的要素含む）",
    "情報の整理方法",
    "デザイン的特徴（AIが直接使用しない参考情報）"
  ],
  "searchKeywords": [
    "ナレッジ類似判定AI用キーワード",
    "コンテンツ関連キーワード"
  ],
  "emotionalTriggers": [
    "投稿がユーザーに望むアクション",
    "問題解決への導き方",
    "共感・安心・スキル獲得・情報活用等"
  ],
  "marketingStage": "ターゲットユーザーの具体的レベル・学習段階・社会人経験等",
  "knowledgeId": "Kxxx",
  "pageStructurePattern": "後で一括設定（分析時は空欄OK）",
  "actualTitle": "投稿トップページのタイトル",
  "pageCount": ページ数,
  "hashTag": "投稿に付けられたハッシュタグ（メタデータとして記録）",
  "detailedContent": {
    "page1": { /* ページ詳細 */ },
    "page2": { /* ページ詳細 */ }
    // 全ページ分記録
  }
}
```

### 投稿タイプ判定ルール

| 課題タイプ | 投稿タイプ | 説明 |
|-----------|-----------|------|
| **悩み・困った** | **001** | 感情的な問題・困難な状況の解決 |
| **目的** | **002** | 明確な手順で達成可能なゴール |
| **ニーズ（情報）** | **003** | 特定の情報・知識の習得 |
| **有益情報** | **004** | 知ったら明日から役立つ実用情報 |

---

## 📊 軸2: 事実ベース観察記録（生データ）

### 観察記録フォーマット

```json
{
  "observationData": {
    "pageInfo": {
      "currentPage": "分析中のページ番号",
      "totalPages": "総ページ数",
      "pageIndicator": "ページ表示の実際の表記（例：2/9）"
    },
    "layoutStructure": {
      "backgroundType": "背景の種類（画像、色、グラデーション等）",
      "backgroundDescription": "背景の具体的内容",
      "overlayStructure": "重ね配置の構造",
      "headerType": "ヘッダー部分の配置・スタイル"
    },
    "contentDistribution": {
      "topSection": {
        "elements": "上部セクションの要素",
        "layout": "配置方法"
      },
      "middleSection": {
        "format": "中央セクションの形式",
        "backgroundColor": "背景色",
        "items": ["実際のテキスト内容"],
        "visualElements": "視覚的要素の詳細"
      },
      "bottomSection": {
        "elements": "下部セクションの要素",
        "ctaElements": "行動喚起要素"
      }
    },
    "actualRole": "そのページの実際の役割（先入観なし）",
    "designElements": {
      "colorScheme": ["使用色の配列"],
      "typography": "フォント・文字スタイル",
      "visualHierarchy": "視覚的階層の実際の順序",
      "trustSignals": ["信頼性を示す要素"],
      "engagementElements": ["エンゲージメント促進要素"]
    },
    "interactionElements": {
      "checkboxes": "チェックボックスの有無・スタイル",
      "buttons": "ボタン要素",
      "swipeIndicators": "スワイプ誘導",
      "savePrompts": "保存促進要素"
    }
  }
}
```

### 観察記録の重要原則

#### 1. 事実のみ記録
- ❌ 「ユーザーの不安を解消するため」（推測）
- ✅ 「チェックボックス付きリストで4つの悩みを表示」（事実）

#### 2. 具体的表現を記録
- ❌ 「親しみやすい表現」（抽象的）
- ✅ 「最初っく、たくさんあるツールから選ぶだけで疲れますよね...」（具体的）

#### 3. 配置・レイアウトの正確な記録
- ❌ 「中央配置」（曖昧）
- ✅ 「Question センター配置、下に悩みリスト、最下部に共感メッセージ」（具体的）

#### 4. 視覚的要素の詳細記録
- ❌ 「おしゃれなデザイン」（主観的）
- ✅ 「白色半透明カード重ね、青色チェックマーク、ベージュ系背景」（客観的）

---

## 📁 ファイル管理ルール

### 保存先とファイル名

**1. フォーマット準拠分析（システム用）**
```
/app/data/knowledgeBase/knowledge/Kxxx.json
例: K102.json, K117.json
```

**2. 事実ベース観察記録（分析用）**
```
/docs/raw-analysis/contents-xxx-observation.json
例: contents-102-observation.json
```

**3. 統合分析記録（参考用）**
```
/docs/コンテンツ分析結果/contents-xxx_analysis_YYYY-MM-DD.json
例: contents-102_analysis_2025-07-23.json
```

### ファイル命名規則

- コンテンツID: `contents-xxx` (例: contents-102)
- ナレッジID: `Kxxx` (例: K102) 
- ペルソナID: `Pxxx` (例: P102)
- 一意性: 各IDは唯一のコンテンツに対応

---

## 🔄 分析手順

### Step 1: 全ページ画像の確認
1. 投稿の全ページを順番に確認
2. 総ページ数を把握
3. 各ページの役割を大まかに把握（詳細分析前）

### Step 2: ページごとの二軸分析
各ページについて以下を実施：

**軸1分析（構造化）:**
- `detailedContent`の該当ページを記録
- テンプレート化可能な要素を抽出

**軸2分析（観察）:**
- `observationData`の該当ページを記録
- レイアウト、配置、視覚的要素の事実記録

### Step 3: 全体統合
1. 投稿タイプの判定
2. 問題・解決の整理
3. キーワード・感情トリガーの抽出
4. 二軸データの整合性確認

### Step 4: ファイル保存
1. システム用JSONファイル保存
2. 観察記録JSONファイル保存
3. 統合分析記録の作成（オプション）

---

## 🎯 後処理での活用方法

### パターン分析
```javascript
// 観察記録から共通パターンを抽出
PatternAnalyzer.analyze({
  analysisFiles: [
    "contents-101-observation.json",
    "contents-102-observation.json", 
    "contents-103-observation.json"
  ],
  groupBy: "postType", // 001, 002, 003, 004
  extractPatterns: [
    "layoutStructure",
    "contentDistribution", 
    "designElements"
  ]
})
```

### 一括システム更新
```javascript
// パターン発見後の一括更新
SystemUpdater.batchUpdate({
  pattern: "problem-identification-checklist",
  targetFiles: ["K101", "K102", "K105"],
  updates: {
    pageStructurePattern: "auto-generated-checklist-problem-pattern",
    templateMappings: {
      "page2": "checklist-enhanced"
    }
  }
})
```

---

## ⚠️ 重要な注意事項

### 分析時の禁止事項
1. **理論的フローの押し付け禁止**
   - ❌ 「001は共感→問題分析→解決策のはず」
   - ✅ 「実際にはいきなり解決策から始まっている」

2. **デザイン評価の禁止**
   - ❌ 「おしゃれ」「効果的」「魅力的」
   - ✅ 「白背景」「青色アクセント」「カード形式」

3. **ユーザー心理の推測禁止**
   - ❌ 「ユーザーが安心するため」
   - ✅ 「信頼性を示す要素として経験年数を表示」

### 品質管理
1. **画像忠実性の確保**
   - 画像で分かれている要素は必ず分離して記録
   - 画像で連続している文章は分割しない

2. **一貫性の維持**
   - 同種の情報は同じ構造で記録
   - フィールド名・値の表記を統一

3. **拡張性の確保**
   - 新しいパターンに対応できる柔軟な構造
   - スクリプトによる一括変更が可能な設計

---

## 📋 分析例（contents-102 参考）

### 軸1: フォーマット準拠（抜粋）
```json
{
  "source": "contents-102",
  "problemDescription": "フリーランスが仕事サイト選び、税金経費管理、開業届、レシート管理で困っている",
  "postType": "001",
  "solutionContent": {
    "提供情報": ["お仕事サイト", "税金経費管理ツール", "開業届ツール"]
  }
}
```

### 軸2: 事実ベース観察（抜粋）
```json
{
  "observationData": {
    "layoutStructure": {
      "backgroundImage": "ブルーベリー/人物写真（背景ぼかし）",
      "overlayStructure": "白色半透明カード重ね"
    },
    "contentDistribution": {
      "middleSection": {
        "format": "checklist-with-checkmarks",
        "items": [
          "安心できるお仕事サイトを探してる",
          "税金や経費の管理が苦手"
        ]
      }
    },
    "actualRole": "problem-identification-with-empathy"
  }
}
```

---

**作成者:** Claude Code  
**目的:** 先入観なしの事実ベース分析によるパターン発見とシステム最適化  
**対象:** Instagram投稿コンテンツ（116個のナレッジ）