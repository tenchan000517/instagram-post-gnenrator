# Instagram Post Generator - ナレッジベース仕様書

## 📊 システム概要

Instagram投稿生成ツール用の包括的ナレッジベースシステム。キャリア・就活・インターンジャンルに特化した100個の厳選されたナレッジペアを搭載し、84のペルソナと68のテーマを統合した高度なコンテンツマッチングシステムです。

## 🎯 基本仕様

### **データ規模**
- **総ナレッジペア数:** 100個
- **ペルソナ数:** 84個 (P001-P084)
- **テーマ数:** 68個 (T001-T068)
- **カテゴリ数:** 68個
- **対象コンテンツ:** contents-001-068（分析済み）, contents-069-116（未分析）

### **ファイル構成**
```
app/services/knowledgeBase/data/
├── problemSolutionPairs.json    # メインナレッジベース
└── masterData/
    ├── personas.json            # ペルソナマスターデータ
    └── themes.json             # テーママスターデータ
```

## 📁 ファイル詳細仕様

### **1. problemSolutionPairs.json**
メインナレッジベースファイル - 3つの主要セクションで構成

#### **metadata セクション**
```json
{
  "metadata": {
    "totalPairs": 100,
    "sourceRange": "contents-001 to contents-068, contents-101-116",
    "personas": ["P001", "P002", ..., "P084"],
    "categories": ["自己分析", "業界研究", ...],
    "extractionDate": "2025-07-22"
  }
}
```

#### **pairs セクション**
各ナレッジペアの詳細データ
```json
{
  "pairs": {
    "knowledge-pair-id": {
      "source": "contents-XXX",
      "targetPersona": "PXXX",
      "problemCategory": "カテゴリ名",
      "role": "guidance-type",
      "actualTitle": "実際の投稿タイトル",
      "problemDescription": "解決する問題の詳細",
      "solutionContent": {
        "targetAudience": "対象オーディエンス",
        "keyMessage": "核心メッセージ",
        "benefits": ["利益1", "利益2", "利益3"],
        "approach": "アプローチ方法"
      },
      "effectiveExpressions": ["効果的表現1", "効果的表現2"],
      "searchKeywords": ["キーワード1", "キーワード2"],
      "emotionalTriggers": ["感情トリガー1", "感情トリガー2"]
    }
  }
}
```

#### **searchIndex セクション**
高速検索用インデックス
```json
{
  "searchIndex": {
    "byPersona": {
      "P001": ["knowledge-pair-id-1", "knowledge-pair-id-2"]
    },
    "byCategory": {
      "自己分析": ["knowledge-pair-id-3"]
    },
    "byRole": {
      "practical-guidance": ["knowledge-pair-id-4"]
    },
    "byEmotionalTrigger": {
      "効率性": ["knowledge-pair-id-5"]
    }
  }
}
```

### **2. personas.json**
84個のペルソナマスターデータ
```json
{
  "P001": {
    "id": "P001",
    "name": "ペルソナ名",
    "description": "ペルソナの詳細説明",
    "characteristics": ["特徴1", "特徴2"],
    "psychologicalNeeds": ["心理的ニーズ1", "心理的ニーズ2"],
    "triggerMoments": ["トリガー1", "トリガー2"],
    "compatibleTypes": ["001", "002"],
    "compatibleThemes": ["T001", "T002"],
    "painPoints": ["痛み1", "痛み2"],
    "desiredOutcomes": ["望む結果1", "望む結果2"]
  }
}
```

### **3. themes.json**
68個のテーママスターデータ
```json
{
  "T001": {
    "id": "T001",
    "name": "テーマ名",
    "description": "テーマの詳細説明",
    "category": "テーマカテゴリ",
    "compatibleTypes": ["001", "002"],
    "compatiblePersonas": ["P001", "P002"],
    "keywords": ["キーワード1", "キーワード2"],
    "emotionalApproach": "感情的アプローチの流れ",
    "applicationScenes": ["適用場面1", "適用場面2"]
  }
}
```

## 🏷️ カテゴリ分類システム

### **主要カテゴリ (68種類)**

#### **就職活動・キャリア (25カテゴリ)**
- 自己分析、業界研究、面接対策
- インターン準備、就活効率化
- キャリア不安、転職・キャリア変更
- 学歴コンプレックス・自己肯定感
- ガクチカ表現・記述方法
- HR・人事担当者思考パターン

#### **働き方・職場スキル (18カテゴリ)**
- 仕事効率化・スピード向上
- 高パフォーマンス・成果最大化
- 働き方マインドセット・ストレス軽減
- 職場選択・評価基準
- 対人関係・権威性構築
- 上司関係・職場人間関係

#### **スキル・能力開発 (15カテゴリ)**
- 思考力向上・認知能力
- メンタル強化・習慣改善
- 技術スキル向上、AI・技術活用
- 将来対応・資格取得
- 生産性向上・効率化

#### **専門分野 (10カテゴリ)**
- SNSマーケティング・集客
- フリーランス・副業
- デザイン・クリエイティブツール
- 起業・開業手続き

## 👥 ペルソナ分類システム

### **84ペルソナの主要タイプ**

#### **就活生タイプ (P001-P046)**
- 自己分析志向者 (P001)
- 面接不安学生 (P002-P003)
- 効率化志向学生 (P004-P005)
- インターン準備学生 (P006-P007)
- 時期別対策学生 (P040-P046)

#### **働く人タイプ (P047-P084)**
- 効率化志向者 (P047-P050)
- スキル向上志向者 (P051-P060)
- キャリア転換志向者 (P061-P074)
- パフォーマンス向上志向者 (P075-P084)

## 🎨 テーマ戦略システム

### **68テーマの構成**

#### **基本テーマ (T001-T020)**
- 自己分析・キャリア探求
- 面接対策・コミュニケーション
- 効率化・生産性向上

#### **発展テーマ (T021-T040)**
- 専門スキル・技術活用
- 人間関係・職場スキル
- メンタルヘルス・自己改善

#### **応用テーマ (T041-T068)**
- 将来準備・キャリア戦略
- 高パフォーマンス・成果創出
- 働き方改革・ライフスタイル

## 🔍 検索・マッチングシステム

### **4層インデックス構造**

1. **byPersona**: ペルソナ別ナレッジペア検索
2. **byCategory**: カテゴリ別ナレッジペア検索  
3. **byRole**: 役割別ナレッジペア検索
4. **byEmotionalTrigger**: 感情トリガー別検索

### **マッチング精度**
- **完全マッチ**: structureScore = 1.0 を目指す100点ルール
- **ペルソナ適合**: 84種類のペルソナで細分化されたターゲティング
- **感情トリガー**: 120+の感情的要素による高精度マッチング

## 📈 システム性能指標

### **データ完整性**
- ナレッジペア完成率: **100%** (100/100)
- ペルソナカバー率: **100%** (84ペルソナ完全統合)
- テーマ統合率: **100%** (68テーマ完全マッピング)

### **コンテンツ品質**
- 各ナレッジペアは実際のInstagram投稿から抽出
- 7つの構造化要素で統一フォーマット化
- 感情トリガーとキーワードによる最適化

### **検索パフォーマンス**
- O(1)検索: インデックス化による高速アクセス
- 多軸検索: ペルソナ×カテゴリ×感情での絞り込み
- 関連性スコア: 複数要素による適合度計算

## 🛠️ 技術仕様

### **データフォーマット**
- **形式**: JSON
- **エンコーディング**: UTF-8
- **構造**: 階層化されたオブジェクト構造

### **整合性チェック**
- totalPairs数と実際のペア数の一致
- ペルソナ・テーマIDの重複チェック
- searchIndex内の参照整合性確認

### **拡張性**
- 新ナレッジペアの追加対応
- ペルソナ・テーマの動的拡張
- カテゴリ分類の柔軟な更新

## 📋 運用ガイドライン

### **更新手順**
1. 新コンテンツの分析・抽出
2. ナレッジペアの構造化データ作成
3. ペルソナ・テーママッピング
4. searchIndexの更新
5. 整合性チェックの実行

### **品質管理**
- 100点ルールの厳守
- ペルソナ適合性の検証
- 感情トリガーの適切性確認

## 🎯 活用方針

### **コンテンツ生成**
- ペルソナベースのターゲティング
- テーマ戦略による一貫性確保
- 感情トリガーによる訴求力最大化

### **継続改善**
- 新パターンの発見・追加
- ペルソナ精度の向上
- マッチングアルゴリズムの最適化

---

**📅 作成日:** 2025-07-22  
**📊 最終更新:** Phase 3 Final Complete  
**🎯 目標達成:** 100ナレッジペア完成 ✅  
**🚀 ステータス:** 本番運用準備完了