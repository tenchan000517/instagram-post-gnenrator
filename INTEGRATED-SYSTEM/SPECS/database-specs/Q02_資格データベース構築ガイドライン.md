# 📋 **資格データベース構築ガイドライン & 5軸評価定義書**
**Version**: 1.0.0  
**作成日**: 2025-09-05  
**重要度**: ★★★★★（絶対遵守）

---

## 🚨 **必読：データ入力の絶対ルール**

### **統一ルール（違反厳禁）**
1. **数値は全て半角数字**（全角禁止）
2. **金額の単位は全て円**（「万円」等の表記禁止）
3. **パーセントは数値のみ**（%記号を含めない）
4. **期間は全て月単位**（年は12倍して月に変換）
5. **nullと0は明確に区別**（データなし=null、ゼロ=0）
6. **文字列は全てダブルクォート**で囲む
7. **日付はYYYY-MM-DD形式**（例：2025-09-05）
8. **URLは必ずhttps://またはhttp://**で始まる

---

## 📊 **5軸評価の定量的定義**

### **1. 取得難易度（difficultyLevel）**

#### **スコア定義（1-5の整数）**
```
スコア1：講習のみ（試験なし）
スコア2：講習＋簡単な確認テスト（合格率90%以上）
スコア3：独学可能な試験（合格率20-89%）
スコア4：専門教育必要（専門学校・大学が前提）
スコア5：超難関（合格率20%未満＋専門教育必要）
```

#### **判定フローチャート**
```
1. 専門学校・大学が必須？
   YES → 合格率20%未満？ → YES: スコア5 / NO: スコア4
   NO  → 次へ
   
2. 試験あり？
   NO  → スコア1（講習のみ）
   YES → 次へ
   
3. 合格率90%以上？
   YES → スコア2
   NO  → スコア3
```

#### **必須入力データ**
- `needsSchool`: boolean（専門教育必須か）
- `examDifficulty`: string（"なし"|"易"|"中"|"難"|"超難"）
- `studyHours`: number（標準学習時間・時間単位）

---

### **2. 専門性（specialization）**

#### **スコア定義（1-5の整数）**
```
スコア1：汎用的基礎知識（どの業界でも使える）
スコア2：特定分野の入門知識
スコア3：特定分野の実務知識
スコア4：特定分野の専門知識（他分野転用困難）
スコア5：高度専門知識（その分野でしか使えない）
```

#### **判定基準**
```json
{
  "fieldSpecificity": "低|中|高",
  "transferability": "高|中|低",  // 他分野への転用可能性
  "uniqueSkills": boolean          // 独占業務の有無
}
```

#### **判定マトリックス**
| fieldSpecificity | transferability | uniqueSkills | スコア |
|-----------------|----------------|--------------|--------|
| 低 | 高 | false | 1 |
| 低 | 高 | true | 2 |
| 中 | 中 | false | 2 |
| 中 | 中 | true | 3 |
| 高 | 低 | false | 4 |
| 高 | 低 | true | 5 |

---

### **3. キャリア価値（careerValue）**

#### **スコア定義（1-5の整数）**
```
スコア1：採用でほぼ考慮されない
スコア2：あれば少し有利
スコア3：特定業界で重視される
スコア4：特定業界で必須レベル
スコア5：複数業界で高く評価される必須資格
```

#### **必須入力データ**
```json
{
  "industryDemand": "string",      // "不要"|"あれば良い"|"推奨"|"必須"
  "recruitmentAdvantage": "string", // "なし"|"低"|"中"|"高"|"極高"
  "promotionImpact": "string"       // "なし"|"小"|"中"|"大"|"極大"
}
```

#### **スコア算出ルール**
- industryDemand="必須" → 最低スコア4
- recruitmentAdvantage="極高" → 最低スコア4
- 複数業界で"必須"または"推奨" → スコア5

---

### **4. 収入インパクト（incomeImpact）**

#### **スコア定義（1-5の整数）**
```
スコア1：収入への影響なし
スコア2：専門業務可能（間接的影響）
スコア3：資格手当あり（月1-3万円）
スコア4：専門職として高給（年収600万円以上）
スコア5：独立開業可能（年収1000万円以上可能）
```

#### **必須入力データ（数値は全て円単位）**
```json
{
  "allowanceRange": "0|10000-30000|30000-50000|50000+",
  "salaryIncrease": "0|0-10|10-20|20-30|30+",  // パーセント
  "independenceIncome": "不可|可能|高収入可能"
}
```

#### **判定ルール**
- allowance月額30000円以上 → 最低スコア3
- salaryIncrease 30%以上 → 最低スコア4
- independenceIncome="高収入可能" → スコア5

---

### **5. 取得しやすさ（acquisitionEase）**

#### **スコア定義（1-5の整数・高いほど良い）**
```
スコア1：極難取得（100万円超または2年超）
スコア2：取得困難（100万円以下＋2年以内）
スコア3：中程度（20万円以下＋6ヶ月以内）
スコア4：取得しやすい（5万円以下＋3ヶ月以内）
スコア5：極易取得（1万円以下＋1ヶ月以内）
```

#### **必須入力データ**
```json
{
  "monetaryCost": number,     // 総費用（円単位）
  "timeCost": number,         // 期間（月単位）
  "opportunityCost": "低|中|高"
}
```

#### **取得しやすさスコア算出ルール**
- 総費用10万円以下 かつ 期間3ヶ月以下 → スコア4-5
- 総費用20万円以下 かつ 期間6ヶ月以下 → スコア3
- 総費用100万円以下 かつ 期間24ヶ月以下 → スコア2
- それ以上 → スコア1

#### **コスト算出式**
```
総コスト = 受験料 + 最小教材費 + (通信講座費 × 0.5)
※独学可能な場合は通信講座費を0.5倍で計算
※専門学校必須の場合は学費を含む
```

---

## 📝 **データ入力規則**

### **金額フィールド（絶対ルール）**
```json
{
  "examFee": 8200,              // ✅ 正しい（円単位の数値）
  "examFee": "8,200円",         // ❌ 間違い（文字列、カンマ、円）
  "examFee": 0.82,              // ❌ 間違い（万円単位）
  "schoolCost": null            // ✅ 正しい（データなしの場合）
}
```

### **期間フィールド（絶対ルール）**
```json
{
  "studyPeriod": "3-6ヶ月",     // ❌ 間違い（文字列）
  "studyPeriod": 6,             // ✅ 正しい（月単位の数値・最大値）
  "validityPeriod": 60,         // ✅ 正しい（5年→60ヶ月）
  "validityPeriod": "永久"      // ❌ 間違い（数値化必須→9999）
}
```

### **パーセントフィールド（絶対ルール）**
```json
{
  "passingRate": 15.6,          // ✅ 正しい（数値のみ）
  "passingRate": "15.6%",       // ❌ 間違い（%記号含む）
  "passingRate": "約15%",       // ❌ 間違い（約は削除）
}
```

### **Boolean フィールド**
```json
{
  "onlineOption": true,          // ✅ 正しい
  "onlineOption": "あり",       // ❌ 間違い
  "onlineOption": 1              // ❌ 間違い
}
```

---

## 📊 **マスターデータベース構造**

### **完成形フォーマット**
```json
{
  "qualifications": [
    {
      "id": "Q001",
      "basicInfo": {
        "name": "宅地建物取引士",
        "englishName": "Real Estate Transaction Specialist",
        "category": "不動産・建築",
        "subCategory": "不動産取引",
        "qualificationType": "国家資格",
        "organizingBody": "一般財団法人 不動産適正取引推進機構",
        "officialUrl": "https://www.retio.or.jp/"
      },
      
      "acquisitionInfo": {
        "acquisitionMethod": "試験",
        "examFrequency": "年1回（10月）",
        "examFormat": "会場型マークシート",
        "onlineOption": false,
        "examFee": 8200,
        "passingRate": 15.6,
        "eligibilityRequirements": "なし",
        "validityPeriod": 60,
        "renewalRequirements": "法定講習受講",
        "practicalTrainingRequired": false,
        "workExperienceRequired": "2年（登録要件）"
      },
      
      "learningInfo": {
        "standardStudyHours": 300,
        "recommendedStudyMethod": ["独学", "通信講座", "資格学校"],
        "studyPeriod": 6,
        "textbookCost": 15000,
        "schoolCost": 150000,
        "onlineCourseCost": 50000
      },
      
      "practicalInfo": {
        "mainIndustries": ["不動産業", "建設業", "金融業"],
        "jobDemandLevel": "高",
        "qualificationAllowance": {
          "min": 10000,
          "max": 30000,
          "average": 20000
        },
        "independenceCapability": true,
        "exclusiveOperations": ["重要事項説明", "契約書への記名押印"],
        "careerAdvancement": "不動産業界での管理職昇進に有利"
      },
      
      "evaluationScores": {
        "difficultyLevel": {
          "score": 3,
          "description": "独学可能だが合格率15%程度",
          "detailFactors": {
            "needsSchool": false,
            "needsWorkExperience": false,
            "examDifficulty": "中",
            "studyHours": 300
          }
        },
        "specialization": {
          "score": 4,
          "description": "不動産取引に特化した専門知識",
          "detailFactors": {
            "fieldSpecificity": "高",
            "transferability": "中",
            "uniqueSkills": true
          }
        },
        "careerValue": {
          "score": 4,
          "description": "不動産業界で必須、他業界でも評価",
          "detailFactors": {
            "industryDemand": "必須",
            "recruitmentAdvantage": "高",
            "promotionImpact": "大"
          }
        },
        "incomeImpact": {
          "score": 3,
          "description": "資格手当2-3万円/月が一般的",
          "detailFactors": {
            "allowanceRange": "10000-30000",
            "salaryIncrease": "10-20",
            "independenceIncome": "可能"
          }
        },
        "acquisitionEase": {
          "score": 3,
          "description": "中程度（独学なら2万円程度）",
          "detailFactors": {
            "monetaryCost": 50000,
            "timeCost": 6,
            "opportunityCost": "中"
          }
        },
        "totalScore": 17
      },
      
      "workshopOnly": {
        "isWorkshopOnly": false,
        "workshopDuration": null,
        "workshopTestDifficulty": null
      },
      
      "metadata": {
        "createdAt": "2025-09-05",
        "updatedAt": "2025-09-05",
        "dataSource": ["公式サイト", "厚労省データ", "求人統計"],
        "verificationStatus": "verified",
        "notes": "不動産業界では必須資格として扱われる"
      }
    }
  ],
  
  "databaseInfo": {
    "version": "1.0.0",
    "totalQualifications": 200,
    "lastUpdated": "2025-09-05",
    "categories": {
      "IT・情報": 25,
      "不動産・建築": 15,
      "医療・福祉": 30,
      "金融・会計": 20,
      "法律・行政": 15,
      "語学・国際": 10,
      "その他": 85
    }
  }
}
```

### **重要：削除したフィールド**
- ❌ `rankingCategory` フィールドは使用しない
  - 理由：データベースはあらゆるランキングに対応すべき
  - 特定のランキングカテゴリを固定するとデータベースの柔軟性が失われる

---

## 🔍 **データ検証チェックリスト**

### **入力前チェック**
- [ ] 公式サイトで最新情報を確認
- [ ] 受験料は税込み金額か確認
- [ ] 合格率は直近3年の平均値を使用
- [ ] 学習時間は一般的な目安を採用

### **入力後チェック**
- [ ] 全ての数値フィールドが半角数字
- [ ] 金額の単位が円で統一
- [ ] 期間の単位が月で統一
- [ ] パーセントが数値のみ
- [ ] 必須フィールドに値が入っている
- [ ] totalScoreが正しく計算されている（5軸の合計）

---

## ⚠️ **よくある間違いと対処法**

### **間違い例1：単位の混在**
```json
// ❌ 間違い
{
  "examFee": "1万2000円",
  "schoolCost": 150000
}

// ✅ 正しい
{
  "examFee": 12000,
  "schoolCost": 150000
}
```

### **間違い例2：曖昧な表現**
```json
// ❌ 間違い
{
  "passingRate": "約20-30%",
  "studyPeriod": "半年程度"
}

// ✅ 正しい
{
  "passingRate": 25,        // 中間値を採用
  "studyPeriod": 6          // 月単位で明確化
}
```

### **間違い例3：nullと0の混同**
```json
// ❌ 間違い
{
  "qualificationAllowance": {
    "min": 0,              // 手当がない場合
    "max": 0
  }
}

// ✅ 正しい
{
  "qualificationAllowance": null  // 手当制度自体がない
}
```

---

## 📊 **総合スコア算出ルール**

```javascript
// 総合スコアの計算
totalScore = difficultyLevel + specialization + careerValue + incomeImpact + acquisitionEase

// 全て1-5の正の評価（高いほど良い）
// 最小値：5、最大値：25
```

---

## 🚀 **実装時の必須バリデーション**

```javascript
// 全エンジニア共通のバリデーション関数
function validateQualificationData(data) {
  const rules = {
    // 数値フィールド
    examFee: { type: 'number', min: 0, max: 1000000 },
    passingRate: { type: 'number', min: 0, max: 100 },
    standardStudyHours: { type: 'number', min: 0, max: 10000 },
    
    // 期間フィールド（月単位）
    studyPeriod: { type: 'number', min: 0, max: 120 },
    validityPeriod: { type: 'number', min: 0, max: 9999 },
    
    // スコアフィールド（1-5）
    difficultyLevel: { type: 'integer', min: 1, max: 5 },
    specialization: { type: 'integer', min: 1, max: 5 },
    careerValue: { type: 'integer', min: 1, max: 5 },
    incomeImpact: { type: 'integer', min: 1, max: 5 },
    acquisitionEase: { type: 'integer', min: 1, max: 5 }
  };
  
  // バリデーション実行
  return validateFields(data, rules);
}
```

---

## 🔧 **スクリプト作成時の注意**

### **データ統合スクリプト**
- 複数のバッチファイルを統合する際は、IDの重複チェック必須
- カテゴリ名の表記ゆれを統一（例：IT・情報 vs IT/情報）
- 数値フィールドの型変換を確実に行う

### **ランキング生成スクリプト**
- フィルタリング条件は動的に設定可能にする
- ソート基準は複数指定可能にする
- 出力形式はJSON形式で統一

---

**このガイドラインは絶対遵守事項です。不明な点があれば、データ入力前に必ず確認してください。**

**作成者**: Claude Code  
**更新日**: 2025-09-05  
**バージョン**: 1.0.0