# 思考プロセス① - ナレッジ理想形定義のためのフィードバック

## 基本方針
今ナレッジKxxxを私の求める理想のナレッジにしようとしています　具体的にまだどのような方向性でどうやって修正するかは決定しておらず今はそれを考えてる段階です

## 現状のKxxxランダムサンプリングフィードバック

**003** 根拠のない実践エピソードなのでナレッジではない
また、ページ２がメインコンテンツだが、大した情報はない

**004** CTAページが混入している

**005** フォーマットページストラクチャーなし　テンプレートべた書き

**007** 仕事が早い人と同じ角度・切り口　これを転職にした感じ

**008** 根本的　装飾まだ入ってる　３ページの中に投稿的価値無し→削除

**009** 良くはなってるけどCTAと装飾がページごとに混入してる　ページもCTAが２つも混入してる　１ページ目は悪くない

**010** フォーマットが大幅に改変されてる　内容自体は悪くない　装飾が混入してる　CTAページが混入してる

## 共通ルール
全部共通でページ１は投稿タイプごとの決まったテンプレートを使用する

入力テキストによってページ１は多少変わるように工夫

**011** フォーマット　アカウント情報が入ってる　謎の？？？表記　装飾が混入してる　ページ番号の表記が違う　numberの表記が違う　根拠のない出典フィールドがある　CTAページが混入してる

**012** ページ番号の表記が違う　装飾が混入してる　謎のいいね　保存表記が混入してる　タイトルページが混入してる　ページの画像指定がmascotという謎の指示？　実在する画像じゃないしパスでもない

**013～015** まで存在しない

**016** 根本的　投稿的価値無し

**017** ページストラクチャーなし　タイトルページが混入してる　ページごとに装飾が混入してる　フォロワーから募集したという根拠のない記述が入ってる　口調が他のナレッジと統一されてない　CTAページが混入している

**018** 導入ページが存在せず、タイトルページとCTAページが混入している　６，７ページ共にCTAページ

**019～020** 存在しない

**021** タイトルページが混入している　導入がない　フォーマット　ページインジケータとかいう無駄なフィールドがある　並列紹介だが、１ページに一つの紹介であれば画像は必須　CTAページが混入している　フォーマットの正解は　132が基本的に正解

**133** シゴデキという略語を使用している　これ自体は悪くないが、これは入力テキストでこれが入るならいいけど、ナレッジにこれが入ると今後ナレッジとして他の投稿をしようとした時も仕事ができるがシゴデキと表現され、このナレッジを使用している、って読者がすぐに気づいてしまう

**181** 元メンヘラが実践して…　という表現　これ毎回投稿はこの人が投稿するわけではないのでターゲットやペルソナは固定されてていいが、投稿者が固定されるような表現は投稿の質を阻害する　183～186は最後のページに謎の関連「ナレッジ」ページがある

## ページ数と内容に関する考え方
ページ数が不足しているとかそういう概念は一旦置いといて　例えば1ページに結構優秀な紹介が詰まってるのならそれはそれでいい　※ページを分けて1ページ1個~２個の紹介でもいいが

## ナレッジデータベースとしての純粋性
これはナレッジのデータベースなので、内容に関係ないCTA　例　保存して　いいねして　その他の関連投稿　プロフィール　無料でプレゼント　タイトルだけのページ　が、ページごとにもコンテンツの中にも一切不要

## アプローチ方針
「修正」作業だと思わないでほしい　私のフィードバックを元に「理想の」ナレッジデータベースというものを作り上げて、それに合わせて全部を「理想形」にするというのアプローチがいいです　まずは私のフィードバックを正確に理想形として昇華する必要があります　ここに私とあなたでギャップが生まれると全部が間違った形になるからね

## 完成テンプレート特定結果

### 使用可能なページ構成
- typeID001-emotion-empathy-list
- typeID001-episode-parallel-intro
- typeID001-basic-intro ✨（新規追加）
- typeID002-ng-good-comparison-pattern
- typeID002-parallel-introduction
- typeID002-sequential-dependency
- typeID003-basic-intro ✨（新規追加）
- typeID004-tools-services-introduction

### 完成テンプレート一覧（19個）

#### TypeID001: 感情共感型
1. **EmotionEmpathyListTemplate** ✅（intro/list/summary全て対応）
2. **FailureStoryIntroTemplate** ✅
3. **FailureEpisodeTemplate** ✅
4. **Type001IntroTemplate** ✅（新規・通常版）
5. **Type001IntroJobTemplate** ✅（新規・就活版）
6. **EpisodeSummaryTemplate** ❌（未実装）

#### TypeID002: 実践型
7. **BasicIntroTemplate** ✅
8. **Type002IntroTemplate** ✅（新規・通常版）
9. **Type002IntroJobTemplate** ✅（新規・就活版）
10. **NgGoodComparisonTemplate** ✅  
11. **DualEnumerationTemplate** ✅
12. **StepGuideAchievementTemplate** ✅
13. **AchievementSummaryTemplate** ✅

#### TypeID003: 業界・企業情報
14. **Type003IntroTemplate** ✅（新規・通常版）
15. **Type003IntroJobTemplate** ✅（新規・就活版）

#### TypeID004: ツール紹介型
16. **ToolsIntroTemplate** ✅
17. **Type004IntroTemplate** ✅（新規・通常版）
18. **Type004IntroJobTemplate** ✅（新規・就活版）
19. **MultipleItemsDisplayTemplate** ✅

### 各ページ構成とテンプレート対応

**typeID001-emotion-empathy-list**
- emotion_empathy_intro → EmotionEmpathyListTemplateで代用
- emotion_empathy_list → EmotionEmpathyListTemplate
- emotion_empathy_summary → EmotionEmpathyListTemplateで代用

**typeID001-episode-parallel-intro**
- failure_story_intro → FailureStoryIntroTemplate
- failure_episode → FailureEpisodeTemplate
- episode_summary → 未実装（最終ページ無しで運用）

**typeID001-basic-intro** ✨（新規）
- type001_intro → Type001IntroTemplate（通常版・就活版選択可能）
- dual_enumeration → DualEnumerationTemplate
- achievement_summary → AchievementSummaryTemplate

**typeID002-ng-good-comparison-pattern**
- basic_intro → BasicIntroTemplate
- ng_good_comparison → NgGoodComparisonTemplate
- achievement_summary → AchievementSummaryTemplate

**typeID002-parallel-introduction**
- basic_intro → BasicIntroTemplate
- dual_enumeration → DualEnumerationTemplate
- achievement_summary → AchievementSummaryTemplate

**typeID002-sequential-dependency**
- basic_intro → BasicIntroTemplate
- step_guide_achievement → StepGuideAchievementTemplate
- achievement_summary → AchievementSummaryTemplate

**typeID003-basic-intro** ✨（新規）
- type003_intro → Type003IntroTemplate（通常版・就活版選択可能）
- multiple_items_display → MultipleItemsDisplayTemplate
- achievement_summary → AchievementSummaryTemplate

**typeID004-tools-services-introduction**
- tools_intro → ToolsIntroTemplate
- multiple_items_display → MultipleItemsDisplayTemplate
- achievement_summary → AchievementSummaryTemplate

## 19個の完成テンプレートの構造要件

### TypeID001: 感情共感型

#### 1. EmotionEmpathyListTemplate
```json
{
  "number": "string",
  "title": "string", 
  "content": "string[]",
  "additionalText": "string?"
}
```

#### 2. FailureStoryIntroTemplate
```json
{
  "question": "string",
  "promise": "string",
  "finalPageOffer": "string",
  "cta": "string"
}
```

#### 3. FailureEpisodeTemplate
```json
{
  "episodeNumber": "string",
  "title": "string",
  "logo": "string?",
  "description": "string",
  "failure": "string", 
  "conclusion": "string",
  "savePrompt": "string?",
  "question": "string?"
}
```

### TypeID002: 実践型

#### 4. BasicIntroTemplate
```json
{
  "title": "string",
  "targetAudience": "string",
  "problems": "string[]",
  "additionalMessage": "string",
  "savePrompt": "string?"
}
```

#### 5. NgGoodComparisonTemplate
```json
{
  "title": "string",
  "content": "string[]"
}
```
*注：contentは❌NGと✅GOOD記号を含む文字列配列で解析される*

#### 6. DualEnumerationTemplate
```json
{
  "items": [
    {
      "number": "string",
      "title": "string", 
      "description": "string",
      "imageSrc": "string?"
    }
  ]
}
```
*注：厳密に2個のアイテムのみ*

#### 新規追加テンプレート（Type001-004導入系、8個）
```json
{
  "title": "string",
  "targetAudience": "string",
  "problems": "string[]", 
  "additionalMessage": "string",
  "savePrompt": "string?"
}
```
*注：Type001IntroTemplate、Type002IntroTemplate、Type003IntroTemplate、Type004IntroTemplate及び就活版（各_job）は全て同じ構造*

#### 7. StepGuideAchievementTemplate
```json
{
  "pointNumber": "string",
  "title": "string",
  "content": "string[]",
  "actionItems": "string[]?",
  "illustrationImage": "string?"
}
```

#### 8. AchievementSummaryTemplate
```json
{
  "summaryTitle": "string",
  "achievementPoints": "string[]",
  "encouragementMessage": "string?"
}
```

### TypeID004: ツール紹介型

#### 9. ToolsIntroTemplate
```json
{
  "title": "string",
  "targetAudience": "string", 
  "problems": "string[]",
  "additionalMessage": "string",
  "savePrompt": "string?"
}
```

#### 10. MultipleItemsDisplayTemplate
```json
{
  "title": "string?",
  "subtitle": "string?",
  "items": [
    {
      "name": "string",
      "description": "string",
      "imageSrc": "string?"
    }
  ]
}
```
*注：items, examples, methods, toolsのいずれかのフィールド名で2-5個のアイテム*

### 未実装テンプレート
#### 11. EpisodeSummaryTemplate ❌
- 構造定義なし（未実装）

### 重要な発見
KnowledgeBasedContentGenerator.tsのtemplateStructuresに一部のテンプレート構造が定義されているが、**実際のテンプレートファイルから読み取った構造とは一致していない**。これらが完成テンプレートの**実際の構造**であり、KnowledgeBasedContentGenerator.tsに挿入すべき構造定義として使用できる。

## 関連ドキュメント

### ページ構成詳細分析
**パス**: `/mnt/c/instagram-course/instagram-post-generator/思考プロセス①_ページ構成.md`

6つの完成ページ構成パターン（typeID001-emotion-empathy-list、typeID001-episode-parallel-intro、typeID002-ng-good-comparison-pattern、typeID002-parallel-introduction、typeID002-sequential-dependency、typeID004-tools-services-introduction）の詳細分析。

各構成の流れ、テンプレート要件、使用場面、共通パターンを包括的にまとめた。導入→メインコンテンツ→まとめの3段階構造、動的ページ対応、オプショナル要素の扱いなど、構造設計思想も明確化済み。

## Type003システム整備フィードバック（2025年7月）

### 初期問題の特定

**エラー分析への指示**: "なぜPageStructureMatcherが呼び出されてる？　なぜAIが稼働してる？"

**前任者への批判**: "あーわかったわ　普通に024に前任者がページストラクチャーを追加しないといけないのに追加してねえわ　マジ最悪"

**作業指示**: "これらに対して　適切にC:\instagram-course\instagram-post-generator\app\services\knowledgeBase\data\pageStructures\typeID003-company-detail-showcase.json C:\instagram-course\instagram-post-generator\app\services\knowledgeBase\data\pageStructures\typeID003-industry-infographic-analysis.json C:\instagram-course\instagram-post-generator\app\services\knowledgeBase\data\pageStructures\typeID003-industry-ranking-list.json　これを  "pageStructurePattern": フィールドを追加してここに設定して　K132を参考にするといいよ"

### 作業範囲の明確化

**指定ナレッジファイルの確認**: "007って私指定した？？？？？"

**正確な作業範囲の提示**: "指定されたのは以下の7つです：- K007: 人事インサイダー情報・業界知見 - K016: 企業実態情報 - K024: 大手企業採用情報 - K026: インターン企業TOP50 - K031: 残業多い職種ランキング - K036: 夏インターン企業18選 - K051: 休日多い仕事9選"

**作業継続の確認**: "はい"

**既存作業の無駄排除**: "いや別に既にあるやつをわざわざ追加せんでもいいがな"

### 問題解決と方向性決定

**P026マッピング修正指示**: "直せ"

**システム稼働確認**: "まあいいやとりあえず稼働したわ"

**現状確認の要求**: "それぞれどのページパターンが振り分けられてる？"

### K024とK026の分類に関する指摘

**024に関して**: "024に関してはランキングではなく一つ一つのディテールでは？"

**K026の方向性決定**: "でもディテールって感じでもないよね？　K026をランキング形式で表示されるように作り替えよう"

**作業指示の明確化**: "やり直してください"

### フォールバック問題の指摘

**システム動作への疑問**: "フォールバックが発生している？　本来ここが正しく機能してるのならPageStructureMatcherが発動するはずがないのだが？"

### ナレッジファイル構造問題の指摘

**生成結果への批判**: "導入しか生成されないですね"

### ランキング形式フォーマットの確定

K026作り替え完了後: "これがランキング形式で表示するためのKxxxのフォーマットになります　これを思考プロセスのページ構成に追記してください"

### 企業詳細形式フォーマットの確定

K024構造確認後: "ディテール版（024）のフォーマットも確定しましたよね？　これを追記しましょう"

### K007の誤分類指摘

Type003への不適切な分類に対して: "K007はなんでここで出てきた？　ハッキリ言ってK007は仕事が早い人ジャンルで合ってこれType003では全くないぞ？"

### フィードバック文書化の指示

**最終指示**: "もう少し前のもある？"