# テンプレート優先順位とコンテンツ生成ロジック改善要求

## 背景と課題
- 100点ルールのために補完的なテンプレートを作成した
- しかし、補完的なテンプレートが積極的に選択されるのは望ましくない
- 優秀なテンプレートが優先的に選択されるべき
- 優秀なテンプレートの項目を埋められることが、コンテンツの品質評価に直結する
- 優秀なテンプレートを埋められないページは品質が低いと評価すべき

## テンプレート優先順位の定義

### 最優先：優秀なテンプレート（積極的に選択されるべき）
1. **表型（table）**
2. **シンプル５（simple5）**
3. **セクション+アイテム型（section-items）**
4. **２カラムセクション+アイテム型（two-column-section-items）**
5. **チェックリスト詳細型（checklist-enhanced）**
6. **独立ボックス型（item-n-title-content）**

### 次点：シンプルコンテンツ用（簡潔な内容に適用）
7. **列挙型（enumeration）**
8. **リスト型（list）**
9. **単一セクション・アイテム無し型（single-section-no-items）**

### 最低優先：補完的テンプレート（項目欠損を防ぐためのみ）
- **解説型2（explanation2）**
- **シンプル型3（simple3）**
- **シンプル型6（simple6）**
- **タイトル+説明型（title-description-only）**
- その他の補完的テンプレート

## 改善目標
1. **優秀なテンプレートの優先選択**
   - コンテンツ生成時に優秀なテンプレートが使えるように内容を調整
   - 優秀なテンプレート要件を満たすコンテンツ生成を促進

2. **品質評価基準**
   - 優秀なテンプレートを埋められる = 高品質コンテンツ
   - 補完的テンプレートしか使えない = 低品質コンテンツ

3. **コンテンツ生成ロジックの改善**
   - 優秀なテンプレート構造に適したコンテンツ生成
   - 項目欠損を防ぎつつ、品質向上を図る
   - 100点ルールを維持しながら優秀テンプレート優先

## 🔄 フロー設計の根本的問題と解決策

### 現在のフロー（問題あり）
```
1. コンテンツを生成 → 2. テンプレートを選択 → 3. 項目に「埋める」
```
**問題**: 「にわとりが先か卵が先か」- 生成後に埋めようとするのは不自然

### 理想的なフロー（テンプレート駆動）
```
1. 優秀テンプレートの構造・項目を理解 → 2. その構造に適したコンテンツを生成 → 3. 自然に100点マッチング達成
```
**利点**: テンプレート要件を満たすコンテンツを意図的に生成

## 🎯 新しい生成戦略

### Phase 1: テンプレート構造分析
- 優秀なテンプレートが求める具体的な構造要件を定義
- 各テンプレートの「理想的なコンテンツパターン」を明確化

### Phase 2: 構造駆動生成
- 入力内容を分析し、最適な優秀テンプレート候補を特定
- そのテンプレート構造に合わせてコンテンツを生成
- 「表型なら比較データ」「セクション+アイテム型なら段階的アクション」など

### Phase 3: 品質保証
- 生成されたコンテンツが意図したテンプレート構造を満たすかチェック
- 100点マッチングの自然な達成

## 実装方針
- **テンプレート駆動生成システム**の構築
- 優秀テンプレート構造要件の明文化
- 構造に基づくコンテンツ生成プロンプトの開発
- 生成前テンプレート選択ロジックの実装

---
*作成日: 2025-01-13*
*更新日: 2025-01-13*
*要求者: ユーザー*
*ステータス: 要求保存完了 - 根本的フロー改善含む*