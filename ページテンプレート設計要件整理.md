# ページテンプレート設計要件整理

## 📋 プロジェクト目的

**Instagram投稿生成システムのページテンプレート作成**
- 各ページの「メインコンテンツ以外」の必要項目とレイアウト（配置）を特定
- 最もユーザーに伝わりやすくかつデザイナブルなテンプレートパターンの設計

## 🎯 重要な設計思想

### **100点ルール**
- **「100点じゃないものは全てテンプレートが存在しない」**
- structureScore = 1.0 → 完璧なマッチ → 適切なテンプレート存在 ✅
- structureScore < 1.0 → 部分的マッチ → 専用テンプレートが不足 ❌
- **妥協は品質劣化** → 100点未満は全て改善対象

### **絶対条件**
**全116ナレッジのメインコンテンツ以外のページが欠損なく表示できるテンプレート作成**

## 🔧 テンプレート設計の核心理解

### **不要な要素（明確に除外）**
- アカウント情報エリア（下部固定、統一デザイン）
- Instagram UI要素（いいね・コメント・シェア領域）
- 背景色
- フォント、文字装飾
- キャラクターの表情（単に画像を配置するだけ）

### **必要な要素**

#### **1. 絶対的固定要素（全投稿共通）**
- **ページインジケーター**
  - 位置: 右上角
  - 形式: 「X/Y」

#### **2. キャラクター配置（TypeID別）**
- TypeID=001: 中央下部配置
- TypeID=002: サイド配置
- TypeID=003: 控えめ配置
- TypeID=004: サポート役配置

#### **3. 装飾要素（参考程度の備考）**
- TypeID=001: 曲線的要素（STEP矢印等）
- TypeID=002: 直線的要素（番号等）
- TypeID=003: シンプル要素（チェックマーク等）
- TypeID=004: モダン要素（ヘッダー等）

## 🎨 設計の本質的課題

### **同一フィールドでも表示パターンが異なる問題**

**例：effectフィールドの表示パターン**

#### **パターン1: 短文型（1行・感嘆符）**
- 文字数: 10-20文字
- 例: 「ファン化につながりやすい！」
- レイアウト: 小さな吹き出し・バッジ形式

#### **パターン2: 段落型（3-4文・詳細説明）**
- 文字数: 60-150文字
- 例: 「サイテへリンクするためにQRコードを使っている方は多いのではないでしょうか？ただ、実は他にも使い方がたくさんあるんです！今日は一挙に紹介していきます！」
- レイアウト: 大きなボックス・複数行対応

#### **パターン3: リスト型（箇条書き・項目列挙）**
- 例: 「音楽の切り替え」「メリハリのある動画」等
- レイアウト: 縦並びリスト・チェックマーク付き

### **他フィールドでも同様の原則**
- **description**: 短文 vs 段落 vs リスト
- **title**: 1行 vs 2行 vs 長文
- **items**: 3項目 vs 7項目 vs 多項目

## 📐 ページ役割別パターンの存在

### **各ページ役割毎に複数パターンが存在**
- **導入**で複数パターン
- **問題共感**で複数パターン
- **メインコンテンツの役割毎**に複数パターン
- **行動促進**で複数パターン
- **まとめ**で複数パターン
- **INDEX**で複数パターン

## 📊 利用可能なデータソース

### **既存分析データ**
- `docs/raw-analysis/` - 116ナレッジの詳細観察データ
- `knowledgeId-postType-マップ.md` - TypeID別分類
- `app/data/knowledgeBase/knowledge/Kxxx.json` - 構造化データ

### **TypeID分類**
- **TypeID=001 (15件)**: 感情的問題解決・共感型投稿
- **TypeID=002 (12件)**: スキル習得・手順解説型投稿
- **TypeID=003 (36件)**: 情報提供・知識習得型投稿
- **TypeID=004 (34件)**: サービス紹介・誘導型投稿
- **未分類 (7件)**: K059, K060, K086, K087, K088, K089, K090

## 🎯 求められる成果物

### **テンプレート設計要件**
```typescript
interface PageTemplate {
  // 必須固定要素
  pageIndicator: "right-top";
  
  // TypeID別配置
  characterPosition: "central" | "side" | "minimal" | "support";
  
  // コンテンツ適応型表示パターン
  contentPatterns: {
    detectPattern(content: string): 'short' | 'paragraph' | 'list';
    shortPattern: { container: 'small-badge'; alignment: 'center'; };
    paragraphPattern: { container: 'large-box'; alignment: 'left'; };
    listPattern: { container: 'vertical-list'; itemStyle: 'bullet-point'; };
  };
  
  // ページ役割別パターン
  roleBasedTemplates: {
    introduction: Pattern[];
    problemEmpathy: Pattern[];
    mainContent: Pattern[];
    actionPromotion: Pattern[];
    summary: Pattern[];
    index: Pattern[];
  };
}
```

## ⚠️ 重要な注意点

1. **コンテンツの長さ・構造に応じて最適な表示パターンを自動選択**するテンプレートシステムが必要
2. **各ページの役割毎にパターンが存在**することを前提とした設計
3. **装飾要素は基本的にテンプレート開発時の参考程度**
4. **キャラクター自体は単に画像をそこに配置するだけ**

---

**作成日**: 2025-07-25  
**目的**: ページテンプレート設計の要件整理  
**対象**: テンプレート開発者・システム設計者