# 次世代Claude Code：真のナレッジ実装プロンプト

## 🎯 実行指示

あなたは**真のナレッジベース完全実装**を実行してください。既存の「焼き増し」状態のナレッジベースを、認知科学に基づく真のナレッジベースへ完全変革します。

## 📚 必須参照ドキュメント

以下のドキュメントを**厳密に**参照してください：

1. **メイン指示書**：
   `/mnt/c/instagram-course/instagram-post-generator/真のナレッジ実装フローマスタードキュメント.md`

2. **段階別実行ルール**：
   `/mnt/c/instagram-course/instagram-post-generator/コンテンツ分析フロー_段階別ドキュメント参照方式_マスタードキュメント.md`

3. **段階1用**：
   `/mnt/c/instagram-course/instagram-post-generator/投稿タイプ判断基準マスタードキュメント.md`

4. **段階2用**：
   `/mnt/c/instagram-course/instagram-post-generator/ターゲット判断基準マスタードキュメント.md`

5. **段階3用**：
   `/mnt/c/instagram-course/instagram-post-generator/ページ構成判断基準マスタードキュメント.md`

6. **段階4用**：
   `/mnt/c/instagram-course/instagram-post-generator/KxxxJSONフォーマットマスタードキュメント.md`

## 🚨 絶対遵守ルール

### **憶測・予測の完全排除**
- ❌ **絶対禁止**：憶測・予測・推測に基づく情報
- ❌ **禁止表現**：「〜と思われる」「〜の可能性がある」「〜かもしれない」
- ✅ **必須**：既存ナレッジファイルの実際の記載内容のみ使用

### **段階別ドキュメント参照の厳守**
- ❌ **禁止**：他段階のドキュメントを先読み
- ❌ **禁止**：複数段階を同時に考慮
- ✅ **必須**：各段階で指定されたドキュメントのみ参照

### **25項目チェックの完全実行**
- ❌ **禁止**：チェック項目の省略・スキップ
- ✅ **必須**：全25項目で✅になるまで修正継続

## 📋 実行手順（5段階）

### **Phase 1: 準備・分析**
```bash
# 1. 既存ナレッジのバックアップ
mkdir -p /mnt/c/instagram-course/instagram-post-generator/backup/legacy_knowledge
mv /mnt/c/instagram-course/instagram-post-generator/app/data/knowledgeBase/knowledge/*.json \
   /mnt/c/instagram-course/instagram-post-generator/backup/legacy_knowledge/
```

```
# 2. Task toolで全既存ナレッジの深度分析実行
- 対象：backup/legacy_knowledge/*.json
- 分析項目：投稿タイプ分布・ターゲット分布・類似度・重複度
- 出力：分析結果JSON + 統合・個別化判定表
```

### **Phase 2: 真のナレッジ設計**
各ナレッジに対して設計書を作成：
```json
{
  "originalKnowledgeIds": ["実際のファイル名"],
  "trueKnowledgeId": "K001_true",
  "designRationale": {
    "existingContentAnalysis": "既存ナレッジの実際の内容分析結果のみ",
    "templateChoice": "判断フレームワーク適用結果",
    "templateReason": "既存内容の特徴に基づく選択理由"
  },
  "factBasedOnly": "憶測・予測一切なし、既存記載内容のみ"
}
```

### **Phase 3: 段階別実装**
**各真のナレッジについて以下を厳密実行**：

#### 段階1：投稿タイプ判断
- **参照**：`投稿タイプ判断基準マスタードキュメント.md`のみ
- **制約**：他ドキュメント参照禁止
- **方法**：Problem-Solutionの本質分析のみ

#### 段階2：ターゲット判断
- **参照**：`ターゲット判断基準マスタードキュメント.md` + 段階1結果
- **制約**：決定した投稿タイプの6個からのみ選択

#### 段階3：ページ構成判断
- **参照**：`ページ構成判断基準マスタードキュメント.md` + 段階1-2結果
- **制約**：既定パターンのみ選択・実装ファイル存在確認必須

#### 段階4：JSON作成
- **参照**：`KxxxJSONフォーマットマスタードキュメント.md` + 段階1-3結果
- **必須**：25項目チェック完全実行（全項目✅必須）

#### 段階5：システム登録
- **対象**：`type-target-persona-relations.json`
- **更新**：targetToPersonas・personaToKnowledge・duplicatedPersonas

### **Phase 4: 未実装ページ構成対応**
段階3で「実装ファイルなし」の場合：
1. `ページ構成作成フロー_段階別ドキュメント参照方式_マスタードキュメント.md`参照
2. 段階3-4のみ実行（段階1-2はスキップ）
3. JSONファイル作成後Phase 3に戻る

### **Phase 5: 最終検証**
```
全真のナレッジファイルで検証：
[ ] エラーフリー動作
[ ] 新テンプレート正常表示
[ ] 編集機能完全動作
[ ] 25項目チェック100%完了
[ ] type-target-persona-relations.json整合性確認
```

## 🎨 新スタイル活用必須

### **キャラクター画像**
```
問題フェーズ：/character_worry.png
解決フェーズ：/character.png
内容に応じた感情マッチング優先
```

### **AIツール画像**
```
multiple_items_displayで使用
ChatGPT → /imag/ai/ChatGPT-Logo.svg
Claude → /imag/ai/claude-ai-icon.png
etc...（実際のパス確認必要）
```

### **レイアウト最適化**
```
3個：ピラミッド型（1個上・2個下）
4個：2x2グリッド
2個：上下配置（dual_enumeration）
```

## 📊 進捗報告形式

各段階完了時に以下を報告：

### **Phase 1完了時**
```
✅ Phase 1完了
- バックアップ完了：XX件のファイル移動
- 分析完了：XX件のナレッジ分析
- 統合候補：XX件特定
- 個別化候補：XX件特定
```

### **Phase 2完了時**
```
✅ Phase 2完了  
- 設計書作成：XX件完了
- 事実ベース確認：憶測・予測なし
- テンプレート選択：判断フレームワーク適用
```

### **Phase 3完了時**
```
✅ Phase 3完了
- 真のKxxxJSON作成：XX件完了
- 25項目チェック：全件100%完了
- 段階別フロー：厳密実行確認
```

### **Phase 4完了時**
```
✅ Phase 4完了
- 未実装ページ構成：XX件新規作成
- JSONファイル実装：エラーフリー確認
```

### **Phase 5完了時**
```
✅ Phase 5完了
- システム統合：エラーフリー確認
- 全機能動作：正常確認
- 品質保証：完璧確認

🎯 真のナレッジベース変革完了！
```

## ⚠️ エラー時の対応

### **エラー発生時は即座に停止し報告**
```
❌ エラー発生：[具体的なエラー内容]
📍 発生段階：Phase X - Step Y
🔍 原因分析：[事実に基づく原因]
💡 解決方法：[具体的な対処法]
```

### **よくあるエラーと対処**
1. **JSON構文エラー**→構文チェック実行
2. **ファイル不存在**→パス確認とファイル作成
3. **テンプレート選択迷い**→判断フレームワーク再適用
4. **25項目チェック漏れ**→全項目再確認

## 🎯 成功の定義

### **定量的成功**
- [ ] 全真のナレッジがエラーフリーで動作
- [ ] 25項目チェック100%完了率
- [ ] 新テンプレート活用率100%
- [ ] システム整合性エラー0件

### **定性的成功**
- [ ] 既存ナレッジより明確に価値向上
- [ ] 憶測・予測の完全排除
- [ ] 事実のみに基づく実装
- [ ] 次世代の学習効果実現

---

## 🚀 実行開始宣言

この指示を理解したら、以下で開始してください：

```
🎯 真のナレッジベース実装開始

Phase 1: 準備・分析段階を開始します。
既存ナレッジのバックアップから実行します。

TodoWriteで進捗管理を開始し、各段階の完了を明確に報告しながら進めます。
```

**重要**：憶測・予測は絶対に混入させず、既存ナレッジの事実のみに基づいて実装してください。