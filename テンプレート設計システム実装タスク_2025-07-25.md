# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­è¨ˆã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…ã‚¿ã‚¹ã‚¯

## ğŸ“‹ æ¦‚è¦

**ç›®çš„**: å„Kxxx.jsonã®ãƒšãƒ¼ã‚¸ãŒæ–°ã—ã„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆã—ã€æƒ…å ±ã®æ¬ æãªãå®Œç’§ã«è¡¨ç¤ºã§ãã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰

**ä½œæˆæ—¥**: 2025-07-25  
**åŸºæº–**: Phase 1åˆ†æçµæœã¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆè­°è«–ã‚’åŸºã«ç­–å®š

---

## ğŸ¯ å®Ÿè£…ã™ã¹ãå…¨ã‚¿ã‚¹ã‚¯

### **Phase 1: Kxxx.jsonãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ä¿®æ­£**

#### **ã‚¿ã‚¹ã‚¯1.1: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆå¯¾è±¡å¤–ãƒšãƒ¼ã‚¸ã®é™¤å¤–**
å„Kxxx.jsonã‹ã‚‰ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆå¯¾è±¡å¤–ã¨ã—ã¦æ˜ç¢ºã«åˆ†é›¢ï¼š

**å®Œå…¨é™¤å¤–å¯¾è±¡:**
- `page1`: ã‚¿ã‚¤ãƒˆãƒ«ãƒšãƒ¼ã‚¸ï¼ˆå…¨æŠ•ç¨¿å…±é€šï¼‰
- æœ€çµ‚2-3ãƒšãƒ¼ã‚¸: CTAãƒ»è‡ªå·±ç´¹ä»‹ãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç³»
  - è‡ªå·±ç´¹ä»‹ãƒ»å®Ÿç¸¾ã‚¢ãƒ”ãƒ¼ãƒ«
  - ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
  - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç´¹ä»‹ãƒ»ãƒ•ã‚©ãƒ­ãƒ¼ä¿ƒé€²
  - é–¢é€£æŠ•ç¨¿ç´¹ä»‹

**å«ã‚ã‚‹å¯¾è±¡:**
- ã¾ã¨ã‚ãƒšãƒ¼ã‚¸ï¼ˆCTAãªã—ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç·æ‹¬ï¼‰

#### **ã‚¿ã‚¹ã‚¯1.2: contentPageCountãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¿½åŠ **
å„Kxxx.jsonã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆå¯¾è±¡ãƒšãƒ¼ã‚¸æ•°ã‚’è¿½åŠ ï¼š

```json
{
  "pageCount": 10,           // å…ƒã®ç·ãƒšãƒ¼ã‚¸æ•°
  "contentPageCount": 7,     // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆå¯¾è±¡ãƒšãƒ¼ã‚¸æ•°ï¼ˆNEWï¼‰
  "detailedContent": { ... }
}
```

#### **ã‚¿ã‚¹ã‚¯1.3: pageStructurePatternãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å»ƒæ­¢**
ä»¥ä¸‹ã‚’å‰Šé™¤ã—ã€æ–°æ–¹å¼ã«å¤‰æ›´ï¼š

```json
// å‰Šé™¤å¯¾è±¡
"pageStructurePattern": "",

// æ–°æ–¹å¼: å„ãƒšãƒ¼ã‚¸ã®templateãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‹ã‚‰ç›´æ¥å–å¾—
"page2": {
  "section": "intro",                    // â† è¿½åŠ 
  "template": "basic_intro",             // â† è¿½åŠ ï¼ˆç›´æ¥å‚ç…§ï¼‰
  "role": "å•é¡Œæèµ·ãƒ»å…±æ„Ÿ",
  "content": "æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å†…å®¹"
}
```

#### **ã‚¿ã‚¹ã‚¯1.4: å¿…è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¿½åŠ **
ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆå¯¾è±¡ã®å„ãƒšãƒ¼ã‚¸ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

**ä½œæ¥­å†…å®¹:**
- 104å€‹ã®Kxxx.jsonãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€æ‹¬æ›´æ–°
- å„ãƒšãƒ¼ã‚¸ã«é©åˆ‡ãª`section`ã¨`template`ã‚’è¨­å®š
- contentPageCountã‚’æ­£ç¢ºã«ç®—å‡ºã—ã¦è¿½åŠ 

#### **ã‚¿ã‚¹ã‚¯1.5: ä¸è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‰Šé™¤æ¤œè¨**
ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‰Šé™¤ã‚’æ¤œè¨ï¼š
- `layout`: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ç®¡ç†ã™ã‚‹ãŸã‚ä¸è¦
- `background`: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ç®¡ç†ã™ã‚‹ãŸã‚ä¸è¦  
- `elements`: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ç®¡ç†ã™ã‚‹ãŸã‚ä¸è¦
- ãã®ä»–è£…é£¾çš„ãªè¦ç´ 

**åˆ¤æ–­åŸºæº–:**
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã§ä½¿ç”¨ã•ã‚Œãªã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå´ã§ç®¡ç†ã™ã¹ãæƒ…å ±

### **Phase 2: æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­è¨ˆãƒ»å®Ÿè£…**

#### **ã‚¿ã‚¹ã‚¯2.1: Phase 1åˆ†æã®å®Œäº†**
**12å€‹ã®ä»£è¡¨ä¾‹ã‹ã‚‰æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç‰¹å®š:**

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:**
- TypeID=001: K006, K027, K030, K032
- TypeID=002: K002, K040, K005  
- TypeID=003: K004, K025, K024
- TypeID=004: K113, K104

**åˆ†æé …ç›®:**
1. å„ãƒšãƒ¼ã‚¸ã®`content`æ§‹é€ åˆ†æ
2. å¿…è¦ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹é€ ã®å®šç¾©
3. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåã®å‘½å

#### **ã‚¿ã‚¹ã‚¯2.2: æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹é€ å®šç¾©**
Phase 1åˆ†æã§ç‰¹å®šã•ã‚ŒãŸ11å€‹ã®æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å®šç¾©ï¼š

**å„ªå…ˆåº¦Aï¼ˆCriticalï¼‰:**
```typescript
// 1. é †åºä¾å­˜ã‚¹ãƒ†ãƒƒãƒ—å‹
interface SequentialStepLearning {
  stepNumber: number
  stepTitle: string
  stepContent: string[]
  questions?: string[]
}

// 2. Q&Aä¸¦åˆ—ç´¹ä»‹å‹  
interface ParallelQaDiscussion {
  questionText: string
  answerText: string
  practicalAdvice: string
}

// 3. ãƒã‚¤ãƒ³ãƒˆãƒªã‚¹ãƒˆå‹
interface PointsListAnalysis {
  pointsTitle: string
  pointsList: string[]
  summaryMessage: string
}

// 4. æ™‚ç³»åˆ—ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å‹
interface TimelineStoryExperience {
  timePoint: string
  scene: string
  character: string
  emotion: string
  context: string
}

// 5. æ©Ÿèƒ½ç´¹ä»‹ä¸¦åˆ—å‹
interface FeatureParallelInfo {
  featureNumber: number
  featureName: string
  description: string
  effect: string
}
```

**å„ªå…ˆåº¦Bï¼ˆHighï¼‰:**
```typescript
// 6-11. ãã®ä»–ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹é€ 
interface CategoryContentLearning {
  categoryName: string
  episodes: string[]
  advice: string
}

interface StepGuideAchievement {
  stepTitle: string
  description: string
  benefit: string
  motivationalMessage: string
}

interface MethodSystematicInfo {
  methodNumber: number
  methodName: string
  description: string
  steps: string[]
}

interface PracticalGuideConversation {
  guideType: string
  points: {title: string, detail: string}[]
  examples?: {phrase: string, usage: string}[]
}

interface CompanyDataList {
  companyName: string
  industry: string
  salary: string
  deadline: string
  selectionFlow: string[]
}

interface UsagePracticalSteps {
  stepNumber: number
  title: string
  content: string
  practicalAdvice: string
}
```

#### **ã‚¿ã‚¹ã‚¯2.3: æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…**
`app/components/templates/`é…ä¸‹ã«æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å®Ÿè£…ï¼š

```tsx
// ä¾‹: SequentialStepTemplate.tsx
export const SequentialStepTemplate = ({ data }: TemplateProps) => {
  return (
    <div className="sequential-step-template">
      <div className="step-number">Point {data.stepNumber}</div>
      <h2>{data.stepTitle}</h2>
      {data.stepContent.map((content, index) => (
        <p key={index}>{content}</p>
      ))}
      <div className="page-indicator">{data.pageIndicator}</div>
    </div>
  )
}
```

#### **ã‚¿ã‚¹ã‚¯2.4: TemplateTypes.tsã®æ›´æ–°**
æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¿ã‚¤ãƒ—ã‚’è¿½åŠ ï¼š

```typescript
export type TemplateType = 
  | 'index'
  | 'enumeration'
  // ... æ—¢å­˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  | 'sequential_step_learning'       // â† è¿½åŠ ï¼ˆå„ªå…ˆåº¦Aï¼‰
  | 'parallel_qa_discussion'         // â† è¿½åŠ ï¼ˆå„ªå…ˆåº¦Aï¼‰
  | 'points_list_analysis'           // â† è¿½åŠ ï¼ˆå„ªå…ˆåº¦Aï¼‰
  | 'timeline_story_experience'      // â† è¿½åŠ ï¼ˆå„ªå…ˆåº¦Aï¼‰
  | 'feature_parallel_info'          // â† è¿½åŠ ï¼ˆå„ªå…ˆåº¦Aï¼‰
  | 'category_content_learning'      // â† è¿½åŠ ï¼ˆå„ªå…ˆåº¦Bï¼‰
  | 'step_guide_achievement'         // â† è¿½åŠ ï¼ˆå„ªå…ˆåº¦Bï¼‰
  | 'method_systematic_info'         // â† è¿½åŠ ï¼ˆå„ªå…ˆåº¦Bï¼‰
  | 'practical_guide_conversation'   // â† è¿½åŠ ï¼ˆå„ªå…ˆåº¦Bï¼‰
  | 'company_data_list'              // â† è¿½åŠ ï¼ˆå„ªå…ˆåº¦Bï¼‰
  | 'usage_practical_steps'          // â† è¿½åŠ ï¼ˆå„ªå…ˆåº¦Bï¼‰
```

### **Phase 3: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã®ä¿®æ­£**

#### **ã‚¿ã‚¹ã‚¯3.1: KnowledgeBasedContentGeneratorã®ä¿®æ­£**
`buildKnowledgeBasedPrompt`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä¿®æ­£ï¼š

```typescript
private buildKnowledgeBasedPrompt(request: KnowledgeBasedGenerationRequest): string {
  const { userInput, knowledgeData, pageNumber } = request
  const pageKey = `page${pageNumber}`
  const currentPageData = knowledgeData.detailedContent[pageKey]
  
  return `
  ã€æŠ•ç¨¿æ„å›³ã€‘
  ${userInput}
  â†‘ã“ã®æŠ•ç¨¿æ„å›³ã«åˆè‡´ã™ã‚‹å†…å®¹ã§ç”Ÿæˆã—ã¦ãã ã•ã„

  ã€æŠ•ç¨¿ã‚¿ã‚¤ãƒ—ã€‘${knowledgeData.postType}
  ã€æŠ•ç¨¿ã‚¿ã‚¤ãƒ—ç†ç”±ã€‘${knowledgeData.postTypeReason}

  ã€è§£æ±ºã™ã¹ãå›°ã£ãŸã€‘
  ${knowledgeData.problemDescription}

  ã€å•é¡Œã‚«ãƒ†ã‚´ãƒªã€‘
  ${knowledgeData.problemCategory}

  ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®å­¦ç¿’ãƒ¬ãƒ™ãƒ«ã€‘
  ${knowledgeData.marketingStage}

  ã€æ´»ç”¨ã™ã¹ãè§£æ±ºç­–ã€‘
  ${JSON.stringify(knowledgeData.solutionContent, null, 2)}

  ã€å®‰å…¨ç¢ºèªæ¸ˆã¿è¡¨ç¾äº‹ä¾‹ã€‘
  ${knowledgeData.effectiveExpressions?.join('\n')}

  ã€æ„Ÿæƒ…ãƒˆãƒªã‚¬ãƒ¼ã€‘
  ${knowledgeData.emotionalTriggers?.join(', ')}

  ã€æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã€‘
  ${knowledgeData.searchKeywords?.join(', ')}

  ã€ç”Ÿæˆå¯¾è±¡ãƒšãƒ¼ã‚¸æƒ…å ±ã€‘
  ãƒšãƒ¼ã‚¸ç•ªå·: ${pageNumber}/${knowledgeData.contentPageCount}  // â† ä¿®æ­£
  ãƒšãƒ¼ã‚¸ã®å½¹å‰²: ${currentPageData.role}
  ã‚»ã‚¯ã‚·ãƒ§ãƒ³: ${currentPageData.section}
  ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ: ${currentPageData.template}  // â† è¿½åŠ 

  ã€ã“ã®ãƒšãƒ¼ã‚¸ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚è€ƒä¾‹ã€‘
  ${currentPageData.content}

  ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹é€ ã€‘
  ${JSON.stringify(this.getTemplateStructure(currentPageData.template), null, 2)}

  ã€ç”Ÿæˆãƒ«ãƒ¼ãƒ«ã€‘
  1. æŠ•ç¨¿æ„å›³ã«å®Œç’§ã«åˆè‡´ã™ã‚‹å†…å®¹ã§ç”Ÿæˆï¼ˆãƒŠãƒ¬ãƒƒã‚¸ã®å˜ç´”ã‚³ãƒ”ãƒ¼ã§ã¯ãªã„ï¼‰
  2. ã“ã®ãƒšãƒ¼ã‚¸ãŒå…¨ä½“ã®${pageNumber}/${knowledgeData.contentPageCount}ãƒšãƒ¼ã‚¸ç›®ã§ã‚ã‚‹ã“ã¨ã‚’æ„è­˜  // â† ä¿®æ­£
  3. ãƒšãƒ¼ã‚¸ã®å½¹å‰²ã€Œ${currentPageData.role}ã€ã«å®Œç’§ã«é©åˆ
  4. ä¸Šè¨˜ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹é€ ã«å®Œç’§ã«é©åˆã™ã‚‹JSONã§å‡ºåŠ›

  ã€å‡ºåŠ›å½¢å¼ã€‘
  ä¸Šè¨˜ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹é€ ã¨å®Œå…¨ã«ä¸€è‡´ã™ã‚‹JSONã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
  `
}
```

#### **ã‚¿ã‚¹ã‚¯3.2: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹é€ å–å¾—ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…**
```typescript
private getTemplateStructure(templateName: string): any {
  const templateStructures = {
    // å„ªå…ˆåº¦Aï¼ˆCriticalï¼‰
    'sequential_step_learning': {
      stepNumber: 'number',
      stepTitle: 'string', 
      stepContent: 'string[]',
      questions: 'string[]?' // optional
    },
    'parallel_qa_discussion': {
      questionText: 'string',
      answerText: 'string',
      practicalAdvice: 'string'
    },
    'points_list_analysis': {
      pointsTitle: 'string',
      pointsList: 'string[]',
      summaryMessage: 'string'
    },
    'timeline_story_experience': {
      timePoint: 'string',
      scene: 'string',
      character: 'string',
      emotion: 'string',
      context: 'string'
    },
    'feature_parallel_info': {
      featureNumber: 'number',
      featureName: 'string',
      description: 'string',
      effect: 'string'
    },
    // å„ªå…ˆåº¦Bï¼ˆHighï¼‰
    'category_content_learning': {
      categoryName: 'string',
      episodes: 'string[]',
      advice: 'string'
    },
    'step_guide_achievement': {
      stepTitle: 'string',
      description: 'string',
      benefit: 'string',
      motivationalMessage: 'string'
    },
    'method_systematic_info': {
      methodNumber: 'number',
      methodName: 'string',
      description: 'string',
      steps: 'string[]'
    },
    'practical_guide_conversation': {
      guideType: 'string',
      points: '{title: string, detail: string}[]',
      examples: '{phrase: string, usage: string}[]?' // optional
    },
    'company_data_list': {
      companyName: 'string',
      industry: 'string',
      salary: 'string',
      deadline: 'string',
      selectionFlow: 'string[]'
    },
    'usage_practical_steps': {
      stepNumber: 'number',
      title: 'string',
      content: 'string',
      practicalAdvice: 'string'
    }
  }
  
  return templateStructures[templateName] || {}
}
```

### **Phase 4: ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ•ãƒ­ãƒ¼ã®ä¿®æ­£**

#### **ã‚¿ã‚¹ã‚¯4.1: convertToTemplateDataãƒ¡ã‚½ãƒƒãƒ‰ã®ç°¡ç´ åŒ–**
æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¯¾å¿œã«ã‚ˆã‚Šè¤‡é›‘ãªå¤‰æ›å‡¦ç†ãŒä¸è¦ã«ãªã‚‹ãŸã‚ç°¡ç´ åŒ–ï¼š

```typescript
private convertToTemplateData(content: any, templateType: TemplateType): TemplateData {
  // æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å ´åˆã¯ã€AIãŒç”Ÿæˆã—ãŸæ§‹é€ ã‚’ãã®ã¾ã¾ä½¿ç”¨
  if (this.isNewTemplate(templateType)) {
    return content // å¤‰æ›ä¸è¦
  }
  
  // æ—¢å­˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å ´åˆã¯å¾“æ¥ã®å¤‰æ›å‡¦ç†
  return this.convertLegacyTemplate(content, templateType)
}
```

#### **ã‚¿ã‚¹ã‚¯4.2: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…**
```typescript
// æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨æ—¢å­˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¯¾å¿œé–¢ä¿‚ã‚’ç®¡ç†
const TEMPLATE_MAPPING = {
  // æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆå„ªå…ˆåº¦Aï¼‰
  'sequential_step_learning': 'new',
  'parallel_qa_discussion': 'new', 
  'points_list_analysis': 'new',
  'timeline_story_experience': 'new',
  'feature_parallel_info': 'new',
  // æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆå„ªå…ˆåº¦Bï¼‰
  'category_content_learning': 'new',
  'step_guide_achievement': 'new',
  'method_systematic_info': 'new',
  'practical_guide_conversation': 'new',
  'company_data_list': 'new',
  'usage_practical_steps': 'new',
  // æ—¢å­˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  'enumeration': 'legacy',
  'list': 'legacy',
  'section-items': 'legacy'
  // ...
}
```

### **Phase 5: ä¸€æ‹¬æ›´æ–°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ**

#### **ã‚¿ã‚¹ã‚¯5.1: Kxxx.jsonä¸€æ‹¬æ›´æ–°ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**
```typescript
// scripts/updateKnowledgeBase.ts
const updateKnowledgeBaseFiles = async () => {
  const knowledgeFiles = glob.sync('app/data/knowledgeBase/knowledge/K*.json')
  
  for (const filePath of knowledgeFiles) {
    const knowledge = JSON.parse(fs.readFileSync(filePath, 'utf8'))
    const updatedKnowledge = addSectionAndTemplate(knowledge)
    fs.writeFileSync(filePath, JSON.stringify(updatedKnowledge, null, 2))
  }
}

const addSectionAndTemplate = (knowledge: any) => {
  // Phase 1åˆ†æçµæœã«åŸºã¥ã„ã¦sectionã¨templateã‚’è¿½åŠ 
  const mapping = getSectionTemplateMapping(knowledge.knowledgeId)
  
  Object.keys(knowledge.detailedContent).forEach(pageKey => {
    if (mapping[pageKey]) {
      knowledge.detailedContent[pageKey].section = mapping[pageKey].section
      knowledge.detailedContent[pageKey].template = mapping[pageKey].template
    }
  })
  
  return knowledge
}
```

#### **ã‚¿ã‚¹ã‚¯5.2: ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿**
```typescript
// Phase 1åˆ†æçµæœã‚’åŸºã«ã—ãŸå®Œå…¨ãªãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆä¾‹ï¼‰
const SECTION_TEMPLATE_MAPPING = {
  "K002": {
    "contentPageCount": 8,  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆå¯¾è±¡ãƒšãƒ¼ã‚¸æ•°
    "pages": {
      "page2": { "section": "intro", "template": "basic_intro" },
      "page3": { "section": "mainContent", "template": "sequential_step_learning" },
      "page4": { "section": "mainContent", "template": "sequential_step_learning" },
      "page5": { "section": "mainContent", "template": "sequential_step_learning" },
      "page6": { "section": "mainContent", "template": "sequential_step_learning" },
      "page7": { "section": "mainContent", "template": "sequential_step_learning" },
      "page8": { "section": "mainContent", "template": "sequential_step_learning" },
      "page9": { "section": "summary", "template": "basic_summary" }
      // page1ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ï¼‰ã¨page10ï¼ˆCTAï¼‰ã¯é™¤å¤–
    }
  },
  "K113": {
    "contentPageCount": 8,
    "pages": {
      "page2": { "section": "intro", "template": "basic_intro" },
      "page3": { "section": "mainContent", "template": "feature_parallel_info" },
      "page4": { "section": "mainContent", "template": "feature_parallel_info" },
      "page5": { "section": "mainContent", "template": "feature_parallel_info" },
      "page6": { "section": "mainContent", "template": "feature_parallel_info" },
      "page7": { "section": "mainContent", "template": "feature_parallel_info" },
      "page8": { "section": "mainContent", "template": "feature_parallel_info" },
      "page9": { "section": "summary", "template": "basic_summary" }
    }
  }
  // ... å…¨104å€‹ã®ãƒãƒƒãƒ”ãƒ³ã‚°
}
```

---

## ğŸš€ å®Ÿè£…é †åº

### **å„ªå…ˆåº¦1ï¼ˆCriticalï¼‰: Phase 1å®Œäº†**
1. **12å€‹ã®ä»£è¡¨ä¾‹åˆ†æå®Œäº†**
   - å„ãƒšãƒ¼ã‚¸ã®æ§‹é€ ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç‰¹å®š
   - å¿…è¦ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§ã®ç¢ºå®š

### **å„ªå…ˆåº¦2ï¼ˆHighï¼‰: åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰**
2. **æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹é€ å®šç¾©**
3. **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ä¿®æ­£**
4. **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹é€ å–å¾—ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…**

### **å„ªå…ˆåº¦3ï¼ˆMediumï¼‰: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®Ÿè£…**
5. **æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…**
6. **TemplateTypes.tsæ›´æ–°**
7. **ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ•ãƒ­ãƒ¼ä¿®æ­£**

### **å„ªå…ˆåº¦4ï¼ˆLowï¼‰: ä¸€æ‹¬é©ç”¨**
8. **ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°ä½œæˆ**
9. **Kxxx.jsonä¸€æ‹¬æ›´æ–°å®Ÿè¡Œ**
10. **ä¸è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å‰Šé™¤**

---

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

### **æŠ€è¡“çš„æŒ‡æ¨™**
- [ ] æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã®æƒ…å ±æ¬ æç‡: 0%
- [ ] convertToTemplateDataã§ã®è¤‡é›‘ãªå¤‰æ›å‡¦ç†: å‰Šæ¸›
- [ ] AIãŒç”Ÿæˆã™ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®é©åˆç‡: 100%

### **é‹ç”¨æŒ‡æ¨™**  
- [ ] å…¨104å€‹ã®Kxxx.jsonãŒæ­£å¸¸å‹•ä½œ
- [ ] æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã®ãƒšãƒ¼ã‚¸è¡¨ç¤ºãŒå®Œç’§
- [ ] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆæ™‚é–“ã®çŸ­ç¸®

### **å“è³ªæŒ‡æ¨™**
- [ ] 100ç‚¹ãƒãƒƒãƒãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿç¾
- [ ] æƒ…å ±ã®æ¬ æãªãå®Œç’§ãªè¡¨ç¤º
- [ ] ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã®å¤šæ§˜ãªæ§‹é€ ã«å®Œå…¨å¯¾å¿œ

---

## âš ï¸ æ³¨æ„äº‹é …

### **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**
- Kxxx.jsonæ›´æ–°å‰ã«å¿…ãšãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
- æ®µéšçš„ãªæ›´æ–°ã¨ãƒ†ã‚¹ãƒˆã®å®Ÿæ–½
- æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®äº’æ›æ€§ç¢ºä¿

### **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­è¨ˆ**
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œ
- æ—¢å­˜ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±ä¸€æ€§
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®ç¢ºä¿

### **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–**
- AIã®ç†è§£ã—ã‚„ã™ã„æ§‹é€ åŒ–
- ç”Ÿæˆå“è³ªã®ç¶™ç¶šçš„ç›£è¦–
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–

---

**ã“ã®ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã«å¾“ã£ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã®æ§‹é€ ã«å®Œç’§ã«é©åˆã™ã‚‹æ–°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ãŒæ§‹ç¯‰ã•ã‚Œã€æƒ…å ±æ¬ æã®ãªã„å®Œç’§ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤ºãŒå®Ÿç¾ã•ã‚Œã¾ã™ã€‚**